function FrontendClient(e){this._connection=e,this._registerEventHandlers()}var EventEmitter=require("events").EventEmitter,inherits=require("util").inherits,debugProtocol=require("debug")("node-inspector:protocol:devtools"),ErrorNotConnected=require("./DebuggerClient").ErrorNotConnected;inherits(FrontendClient,EventEmitter),Object.defineProperties(FrontendClient.prototype,{isConnected:{get:function(){return this._connection!=null}}}),FrontendClient.prototype._registerEventHandlers=function(){this._connection.on("disconnect",this._onConnectionClose.bind(this)),this._connection.on("message",this._onConnectionMessage.bind(this))},FrontendClient.prototype._onConnectionClose=function(){this._connection=null,this.emit("close")},FrontendClient.prototype._onConnectionMessage=function(e){this.emit("message",e)},FrontendClient.prototype._sendMessage=function(e){var t=typeof e=="string"?e:JSON.stringify(e);debugProtocol("backend: "+t);if(!this._connection){this._errorMessageDisplayed||(console.log("Cannot send response - there is no front-end connection."),this._errorMessageDisplayed=!0);return}this._errorMessageDisplayed=!1,this._connection.send(t)},FrontendClient.prototype.sendResponse=function(e,t,n,r){if(e==null)throw new Error("Cannot send response to "+t+" without a requestId");var i={id:e};n!=null?(this._onErrorResponse(t,n),i.error=n.toString()):i.result=r,this._sendMessage(i)},FrontendClient.prototype._onErrorResponse=function(e,t){t instanceof ErrorNotConnected&&this.sendInspectorDetached(t.message),this.sendLogToConsole("error",e+" failed.\n"+t)},FrontendClient.prototype.sendEvent=function(e,t){var n={method:e,params:t||{}};this._sendMessage(n)},FrontendClient.prototype.sendLogToConsole=function(e,t){this._sendMessage("showConsole"),this.sendEvent("Console.messageAdded",{message:{source:3,type:0,level:e,line:0,column:0,url:"",groupLevel:7,repeatCount:1,text:t}})},FrontendClient.prototype.sendInspectorDetached=function(e){this.sendEvent("Inspector.detached",{reason:e})},exports.FrontendClient=FrontendClient;