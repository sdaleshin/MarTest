function FrontendCommandHandler(e,t,n,r,i){this._config=e,this._agents={},this._specialCommands={},this._frontendClient=t,this._debuggerClient=n,this._breakEventHandler=r,this._scriptManager=i,this._initializeRegistry(),this._registerEventHandlers()}var debugProtocol=require("debug")("node-inspector:protocol:devtools"),RuntimeAgent=require("./RuntimeAgent").RuntimeAgent,PageAgent=require("./PageAgent").PageAgent,NetworkAgent=require("./NetworkAgent").NetworkAgent,DebuggerAgent=require("./DebuggerAgent").DebuggerAgent;FrontendCommandHandler.prototype={_initializeRegistry:function(){this._registerAgent("Debugger",new DebuggerAgent(this._config,this._frontendClient,this._debuggerClient,this._breakEventHandler,this._scriptManager)),this._registerAgent("Runtime",new RuntimeAgent(this._config,this._debuggerClient)),this._registerAgent("Page",new PageAgent(this._config,this._debuggerClient,this._scriptManager)),this._registerAgent("Network",new NetworkAgent),this._registerNoopCommands("Network.enable","Console.enable","Console.clearMessages","Database.enable","DOMStorage.enable","DOM.hideHighlight","Inspector.enable","Page.clearDeviceOrientationOverride","Page.clearGeolocationOverride","Page.setContinuousPaintingEnabled","Page.setEmulatedMedia","Page.setDeviceMetricsOverride","Page.setShowDebugBorders","Page.setShowFPSCounter","Page.setShowScrollBottleneckRects","Page.setShowViewportSizeOnResize","Profiler.enable","CSS.enable"),this._registerQuery("CSS.getSupportedCSSProperties",{cssProperties:[]}),this._registerQuery("Worker.canInspectWorkers",{result:!1}),this._registerQuery("Page.getScriptExecutionStatus",{result:"enabled"})},_registerAgent:function(e,t){this._agents[e]=t},_registerNoopCommands:function(){var e,t;for(e=0;e<arguments.length;e++)t=arguments[e],this._specialCommands[t]={}},_registerQuery:function(e,t){this._specialCommands[e]={result:t}},_registerEventHandlers:function(){this._frontendClient.on("message",this._handleFrontendMessage.bind(this))},_handleFrontendMessage:function(e){debugProtocol("frontend: "+e);var t=JSON.parse(e);this.handleCommand(t)},handleCommand:function(e){var t=e.method,n=t.split("."),r=n[0],i=n[1],s=e.id,o,u;if(this._specialCommands[t]){this._handleMethodResult(s,t,null,this._specialCommands[t].result);return}o=this._agents[r];if(!o){this._sendNotImplementedResponse(s,t);return}u=o[i];if(!u||typeof u!="function"){this._sendNotImplementedResponse(s,t);return}u.call(o,e.params,function(n,r){this._handleMethodResult(e.id,t,n,r)}.bind(this))},_sendNotImplementedResponse:function(e,t){console.log("Received request for a method not implemented:",t),this._handleMethodResult(e,t,new Error("Not implemented."))},_handleMethodResult:function(e,t,n,r){var i;if(!e){i!==undefined&&console.log("Warning: discarded result of "+t);return}this._frontendClient.sendResponse(e,t,n,r)}},exports.FrontendCommandHandler=FrontendCommandHandler;