/*
 * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.
 * Copyright (C) 2007 Matt Lilek (pewtermoose@gmail.com).
 * Copyright (C) 2009 Joseph Pecoraro
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1.  Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 * 2.  Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimer in the
 *     documentation and/or other materials provided with the distribution.
 * 3.  Neither the name of Apple Computer, Inc. ("Apple") nor the names of
 *     its contributors may be used to endorse or promote products derived
 *     from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

function buildPlatformExtensionAPI(e){return"var extensionInfo = "+JSON.stringify(e)+";"+"var tabId = "+WebInspector._inspectedTabId+";"+platformExtensionAPI.toString()}var WebInspector={_panelDescriptors:function(){this.panels={},WebInspector.inspectorView=new WebInspector.InspectorView;var e=document.getElementById("main");WebInspector.inspectorView.show(e),WebInspector.inspectorView.addEventListener(WebInspector.InspectorView.Events.PanelSelected,this._panelSelected,this);var t=new WebInspector.ElementsPanelDescriptor,n=new WebInspector.PanelDescriptor("resources",WebInspector.UIString("Resources"),"ResourcesPanel","ResourcesPanel.js"),r=new WebInspector.NetworkPanelDescriptor,i=new WebInspector.ScriptsPanelDescriptor,s=new WebInspector.TimelinePanelDescriptor,o=new WebInspector.ProfilesPanelDescriptor,u=new WebInspector.PanelDescriptor("audits",WebInspector.UIString("Audits"),"AuditsPanel","AuditsPanel.js"),a=new WebInspector.PanelDescriptor("console",WebInspector.UIString("Console"),"ConsolePanel"),f=[t,n,r,i,s,o,u,a];if(WebInspector.experimentsSettings.layersPanel.isEnabled()){var l=new WebInspector.LayersPanelDescriptor;f.push(l)}var c=[o];WebInspector.experimentsSettings.customizableToolbar.isEnabled()&&(c=[],c.push(new WebInspector.PanelDescriptor("cpu-profiler",WebInspector.UIString("CPU Profiler"),"CPUProfilerPanel","ProfilesPanel.js")),WebInspector.WorkerManager.isWorkerFrontend()||c.push(new WebInspector.PanelDescriptor("css-profiler",WebInspector.UIString("CSS Profiler"),"CSSSelectorProfilerPanel","ProfilesPanel.js")),c.push(new WebInspector.PanelDescriptor("heap-profiler",WebInspector.UIString("Heap Profiler"),"HeapProfilerPanel","ProfilesPanel.js")),!WebInspector.WorkerManager.isWorkerFrontend()&&WebInspector.experimentsSettings.canvasInspection.isEnabled()&&c.push(new WebInspector.PanelDescriptor("canvas-profiler",WebInspector.UIString("Canvas Profiler"),"CanvasProfilerPanel","ProfilesPanel.js")),Array.prototype.splice.bind(f,f.indexOf(o),1).apply(null,c));var h=[];if(WebInspector.WorkerManager.isWorkerFrontend())return h.push(i),h.push(s),h=h.concat(c),h.push(a),h;for(var p=0;p<f.length;++p)h.push(f[p]);return h},_panelSelected:function(){this._toggleConsoleButton.setEnabled(WebInspector.inspectorView.currentPanel().name!=="console")},_createGlobalStatusBarItems:function(){var e=document.getElementById("bottom-status-bar-container"),t=document.getElementById("main-status-bar");t.insertBefore(this.dockController.element,e),this._toggleConsoleButton=new WebInspector.StatusBarButton(WebInspector.UIString("Show console."),"console-status-bar-item"),this._toggleConsoleButton.addEventListener("click",this._toggleConsoleButtonClicked.bind(this),!1),t.insertBefore(this._toggleConsoleButton.element,e),this.inspectElementModeController&&t.insertBefore(this.inspectElementModeController.toggleSearchButton.element,e),WebInspector.queryParamsObject.remoteFrontend&&WebInspector.experimentsSettings.screencast.isEnabled()&&(this._toggleScreencastButton=new WebInspector.StatusBarButton(WebInspector.UIString("Toggle screencast."),"screencast-status-bar-item"),this._toggleScreencastButton.addEventListener("click",this._toggleScreencastButtonClicked.bind(this),!1),t.insertBefore(this._toggleScreencastButton.element,e)),t.appendChild(this.settingsController.statusBarItem)},_toggleConsoleButtonClicked:function(){if(!this._toggleConsoleButton.enabled())return;var e=window.event&&window.event.shiftKey?WebInspector.Drawer.AnimationType.Slow:WebInspector.Drawer.AnimationType.Normal;this._toggleConsoleButton.toggled?this.closeConsole(e):this.showConsole(e)},_toggleScreencastButtonClicked:function(){this._toggleScreencastButton.toggled=!this._toggleScreencastButton.toggled,this._screencastView||(this._screencastView=new WebInspector.ScreencastView,this._screencastSplitView=new WebInspector.SplitView(!0,"screencastSplitView"),this._screencastSplitView.markAsRoot(),this._screencastSplitView.show(document.body),this._screencastView.show(this._screencastSplitView.firstElement()),this._screencastSplitView.secondElement().appendChild(document.getElementById("root")),this.inspectorView.element.remove(),this.inspectorView.show(document.getElementById("main"))),this._toggleScreencastButton.toggled?this._screencastSplitView.showBoth():this._screencastSplitView.showOnlySecond()},showViewInDrawer:function(e,t,n){this._toggleConsoleButton.title=WebInspector.UIString("Show console."),this._toggleConsoleButton.toggled=!1,this._removeDrawerView();var r=document.createElement("div");r.className="drawer-header status-bar-item",r.appendChild(e),r.onclose=n;var i=r.createChild("div","close-button");i.addEventListener("click",this.closeViewInDrawer.bind(this),!1);var s=document.getElementById("panel-status-bar"),o=document.getElementById("drawer-view-anchor");s.insertBefore(r,o),this._drawerStatusBarHeader=r,this.drawer.show(t,WebInspector.Drawer.AnimationType.Immediately)},closeViewInDrawer:function(){this._drawerStatusBarHeader&&(this._removeDrawerView(),this._consoleWasShown?this.showConsole():this.drawer.hide(WebInspector.Drawer.AnimationType.Immediately))},_removeDrawerView:function(){this._drawerStatusBarHeader&&(this._drawerStatusBarHeader.remove(),this._drawerStatusBarHeader.onclose&&this._drawerStatusBarHeader.onclose(),delete this._drawerStatusBarHeader)},showConsole:function(e){e=e||WebInspector.Drawer.AnimationType.Normal;if(this.consoleView.isShowing()&&!WebInspector.drawer.isHiding())return;WebInspector.drawer.visible&&this._removeDrawerView(),this._toggleConsoleButton.toggled=!0,this._toggleConsoleButton.title=WebInspector.UIString("Hide console."),this.drawer.show(this.consoleView,e),this._consoleWasShown=!0},closeConsole:function(e){e=e||WebInspector.Drawer.AnimationType.Normal;if(!this.consoleView.isShowing()||!WebInspector.drawer.visible)return;this._toggleConsoleButton.toggled=!1,this._toggleConsoleButton.title=WebInspector.UIString("Show console."),this.drawer.hide(e),this._consoleWasShown=!1},_resetErrorAndWarningCounts:function(){var e=document.getElementById("error-warning-count");if(!e)return;e.addStyleClass("hidden")},_updateErrorAndWarningCounts:function(){var e=WebInspector.console.errors,t=WebInspector.console.warnings;if(!e&&!t){this._resetErrorAndWarningCounts();return}var n=document.getElementById("error-warning-count");if(!n)return;n.removeStyleClass("hidden"),n.removeChildren();if(e){var r=n.createChild("div","error-icon-small"),i=n.createChild("span");i.id="error-count",i.textContent=e}if(t){var s=n.createChild("div","warning-icon-small"),o=n.createChild("span");o.id="warning-count",o.textContent=t}e?t?e==1?t==1?n.title=WebInspector.UIString("%d error, %d warning",e,t):n.title=WebInspector.UIString("%d error, %d warnings",e,t):t==1?n.title=WebInspector.UIString("%d errors, %d warning",e,t):n.title=WebInspector.UIString("%d errors, %d warnings",e,t):e==1?n.title=WebInspector.UIString("%d error",e):n.title=WebInspector.UIString("%d errors",e):t==1?n.title=WebInspector.UIString("%d warning",t):t?n.title=WebInspector.UIString("%d warnings",t):n.title=null},get inspectedPageDomain(){var e=WebInspector.inspectedPageURL&&WebInspector.inspectedPageURL.asParsedURL();return e?e.host:""},_initializeCapability:function(e,t,n,r){Capabilities[e]=r,t&&t()},_zoomIn:function(){this._zoomLevel=Math.min(this._zoomLevel+1,WebInspector.Zoom.Table.length-WebInspector.Zoom.DefaultOffset-1),this._requestZoom()},_zoomOut:function(){this._zoomLevel=Math.max(this._zoomLevel-1,-WebInspector.Zoom.DefaultOffset),this._requestZoom()},_resetZoom:function(){this._zoomLevel=0,this._requestZoom()},_requestZoom:function(){WebInspector.settings.zoomLevel.set(this._zoomLevel);var e=this._zoomLevel+WebInspector.Zoom.DefaultOffset;e=Math.min(WebInspector.Zoom.Table.length-1,e),e=Math.max(0,e),InspectorFrontendHost.setZoomFactor(WebInspector.Zoom.Table[e])},_debuggerPaused:function(){WebInspector.panel("scripts")}};WebInspector.Events={InspectorLoaded:"InspectorLoaded",InspectorClosing:"InspectorClosing"},function(){WebInspector.queryParamsObject={};var t=window.location.search;if(!t)return;var n=t.substring(1).split("&");for(var r=0;r<n.length;++r){var i=n[r].split("=");WebInspector.queryParamsObject[i[0]]=i[1]}}(),WebInspector.suggestReload=function(){window.confirm(WebInspector.UIString("It is recommended to restart inspector after making these changes. Would you like to restart it?"))&&this.reload()},WebInspector.reload=function(){InspectorAgent.reset();var e=window.location.search,t=window.location.href;t=t.substring(0,t.length-e.length);var n={};for(var r in WebInspector.queryParamsObject)n[r]=WebInspector.queryParamsObject[r];this.dockController&&(n.dockSide=this.dockController.dockSide());var i=Object.keys(n);for(var s=0;s<i.length;++s)t+=(s?"&":"?")+i[s]+"="+n[i[s]];document.location=t},WebInspector.loaded=function(){InspectorBackend.loadFromJSONIfNeeded("../protocol.json"),WebInspector.dockController=new WebInspector.DockController;if(WebInspector.WorkerManager.isDedicatedWorkerFrontend()){WebInspector.doLoadedDone();return}var e;if("ws"in WebInspector.queryParamsObject)e="ws://"+WebInspector.queryParamsObject.ws;else if("page"in WebInspector.queryParamsObject){var t=WebInspector.queryParamsObject.page,n="host"in WebInspector.queryParamsObject?WebInspector.queryParamsObject.host:window.location.host;e="ws://"+n+"/devtools/page/"+t}if(e){WebInspector.socket=new WebSocket(e),WebInspector.socket.onmessage=function(e){InspectorBackend.dispatch(e.data)},WebInspector.socket.onerror=function(e){console.error(e)},WebInspector.socket.onopen=function(){InspectorFrontendHost.sendMessageToBackend=WebInspector.socket.send.bind(WebInspector.socket),WebInspector.doLoadedDone()},WebInspector.socket.onclose=function(){WebInspector.socket._detachReason||(new WebInspector.RemoteDebuggingTerminatedScreen("websocket_closed")).showModal()};return}WebInspector.doLoadedDone(),InspectorFrontendHost.isStub&&(InspectorFrontendAPI.dispatchQueryParameters(),WebInspector._doLoadedDoneWithCapabilities())},WebInspector.doLoadedDone=function(){WebInspector.installPortStyles(),WebInspector.socket&&document.body.addStyleClass("remote"),WebInspector.queryParamsObject.toolbarColor&&WebInspector.queryParamsObject.textColor&&WebInspector.setToolbarColors(WebInspector.queryParamsObject.toolbarColor,WebInspector.queryParamsObject.textColor),WebInspector.WorkerManager.loaded(),WorkerAgent.canInspectWorkers(WebInspector._initializeCapability.bind(WebInspector,"canInspectWorkers",WebInspector._doLoadedDoneWithCapabilities.bind(WebInspector)))},WebInspector._doLoadedDoneWithCapabilities=function(){function s(){WebInspector.inspectorView.currentPanel()||WebInspector.showPanel(WebInspector.settings.lastActivePanel.get())}function o(){PageAgent.setShowViewportSizeOnResize(!0,WebInspector.settings.showMetricsRulers.get())}(new WebInspector.VersionController).updateVersion(),WebInspector.shortcutsScreen=new WebInspector.ShortcutsScreen,this._registerShortcuts(),WebInspector.shortcutsScreen.section(WebInspector.UIString("Console")),WebInspector.shortcutsScreen.section(WebInspector.UIString("Elements Panel"));var e=this._panelDescriptors();for(var t=0;t<e.length;++t)e[t].registerShortcuts();this.console=new WebInspector.ConsoleModel,this.console.addEventListener(WebInspector.ConsoleModel.Events.ConsoleCleared,this._resetErrorAndWarningCounts,this),this.console.addEventListener(WebInspector.ConsoleModel.Events.MessageAdded,this._updateErrorAndWarningCounts,this),this.console.addEventListener(WebInspector.ConsoleModel.Events.RepeatCountUpdated,this._updateErrorAndWarningCounts,this),WebInspector.CSSMetadata.requestCSSShorthandData(),this.drawer=new WebInspector.Drawer,this.networkManager=new WebInspector.NetworkManager,this.resourceTreeModel=new WebInspector.ResourceTreeModel(this.networkManager),this.debuggerModel=new WebInspector.DebuggerModel,this.debuggerModel.addEventListener(WebInspector.DebuggerModel.Events.DebuggerPaused,this._debuggerPaused,this),this.networkLog=new WebInspector.NetworkLog,this.domAgent=new WebInspector.DOMAgent,this.domAgent.addEventListener(WebInspector.DOMAgent.Events.InspectNodeRequested,this._inspectNodeRequested,this),this.runtimeModel=new WebInspector.RuntimeModel(this.resourceTreeModel),this.consoleView=new WebInspector.ConsoleView(WebInspector.WorkerManager.isWorkerFrontend()),InspectorBackend.registerInspectorDispatcher(this),this.isolatedFileSystemManager=new WebInspector.IsolatedFileSystemManager,this.isolatedFileSystemDispatcher=new WebInspector.IsolatedFileSystemDispatcher(this.isolatedFileSystemManager),this.workspace=new WebInspector.Workspace(this.isolatedFileSystemManager.mapping()),this.cssModel=new WebInspector.CSSStyleModel(this.workspace),this.timelineManager=new WebInspector.TimelineManager,this.tracingAgent=new WebInspector.TracingAgent,this.overridesSupport=new WebInspector.OverridesSupport,this.searchController=new WebInspector.SearchController,this.advancedSearchController=new WebInspector.AdvancedSearchController,WebInspector.WorkerManager.isWorkerFrontend()||(this.inspectElementModeController=new WebInspector.InspectElementModeController),this.settingsController=new WebInspector.SettingsController,this.domBreakpointsSidebarPane=new WebInspector.DOMBreakpointsSidebarPane,this._zoomLevel=WebInspector.settings.zoomLevel.get(),this._zoomLevel&&this._requestZoom();var n=WebInspector.UIString("a panel chosen automatically"),r=WebInspector.settings.createSetting("openLinkHandler",n);this.openAnchorLocationRegistry=new WebInspector.HandlerRegistry(r),this.openAnchorLocationRegistry.registerHandler(n,function(){return!1}),this.workspaceController=new WebInspector.WorkspaceController(this.workspace),this.fileSystemWorkspaceProvider=new WebInspector.FileSystemWorkspaceProvider(this.isolatedFileSystemManager,this.workspace),this.networkWorkspaceProvider=new WebInspector.SimpleWorkspaceProvider(this.workspace,WebInspector.projectTypes.Network),new WebInspector.NetworkUISourceCodeProvider(this.networkWorkspaceProvider,this.workspace),this.breakpointManager=new WebInspector.BreakpointManager(WebInspector.settings.breakpoints,this.debuggerModel,this.workspace),this.scriptSnippetModel=new WebInspector.ScriptSnippetModel(this.workspace),new WebInspector.DebuggerScriptMapping(this.workspace,this.networkWorkspaceProvider),this.liveEditSupport=new WebInspector.LiveEditSupport(this.workspace),this.styleContentBinding=new WebInspector.StyleContentBinding(this.cssModel,this.workspace),new WebInspector.CSSStyleSheetMapping(this.cssModel,this.workspace,this.networkWorkspaceProvider),new WebInspector.PresentationConsoleMessageHelper(this.workspace),this._createGlobalStatusBarItems(),this.toolbar=new WebInspector.Toolbar,WebInspector.startBatchUpdate();for(var t=0;t<e.length;++t)WebInspector.inspectorView.addPanel(e[t]);WebInspector.endBatchUpdate(),this.addMainEventListeners(document),window.addEventListener("resize",this.windowResize.bind(this),!0);var i=document.getElementById("error-warning-count");i.addEventListener("click",this.showConsole.bind(this),!1),this._updateErrorAndWarningCounts(),this.extensionServer.initExtensions(),this.console.enableAgent(),InspectorAgent.enable(s),this.databaseModel=new WebInspector.DatabaseModel,this.domStorageModel=new WebInspector.DOMStorageModel,ProfilerAgent.enable(),WebInspector.settings.forceCompositingMode=WebInspector.settings.createBackendSetting("forceCompositingMode",!1,PageAgent.setForceCompositingMode.bind(PageAgent)),WebInspector.settings.showPaintRects=WebInspector.settings.createBackendSetting("showPaintRects",!1,PageAgent.setShowPaintRects.bind(PageAgent)),WebInspector.settings.showDebugBorders=WebInspector.settings.createBackendSetting("showDebugBorders",!1,PageAgent.setShowDebugBorders.bind(PageAgent)),WebInspector.settings.continuousPainting=WebInspector.settings.createBackendSetting("continuousPainting",!1,PageAgent.setContinuousPaintingEnabled.bind(PageAgent)),WebInspector.settings.showFPSCounter=WebInspector.settings.createBackendSetting("showFPSCounter",!1,PageAgent.setShowFPSCounter.bind(PageAgent)),WebInspector.settings.showScrollBottleneckRects=WebInspector.settings.createBackendSetting("showScrollBottleneckRects",!1,PageAgent.setShowScrollBottleneckRects.bind(PageAgent)),WebInspector.settings.showMetricsRulers.addChangeListener(o),o(),WebInspector.WorkerManager.loadCompleted(),InspectorFrontendAPI.loadCompleted(),WebInspector.notifications.dispatchEventToListeners(WebInspector.Events.InspectorLoaded)};var windowLoaded=function(){WebInspector.loaded(),window.removeEventListener("DOMContentLoaded",windowLoaded,!1),delete windowLoaded};window.addEventListener("DOMContentLoaded",windowLoaded,!1);var messagesToDispatch=[];WebInspector.dispatchQueueIsEmpty=function(){return messagesToDispatch.length==0},WebInspector.dispatch=function(e){messagesToDispatch.push(e),setTimeout(function(){InspectorBackend.dispatch(messagesToDispatch.shift())},0)},WebInspector.windowResize=function(e){WebInspector.inspectorView&&WebInspector.inspectorView.doResize(),WebInspector.drawer&&WebInspector.drawer.resize(),WebInspector.toolbar&&WebInspector.toolbar.resize(),WebInspector.settingsController&&WebInspector.settingsController.resize(),WebInspector._screencastSplitView&&WebInspector._screencastSplitView.doResize()},WebInspector.setDockingUnavailable=function(e){this.dockController&&this.dockController.setDockingUnavailable(e)},WebInspector.close=function(e){if(this._isClosing)return;this._isClosing=!0,this.notifications.dispatchEventToListeners(WebInspector.Events.InspectorClosing),InspectorFrontendHost.closeWindow()},WebInspector.documentClick=function(e){function n(){if(WebInspector.isBeingEdited(e.target))return;if(WebInspector.openAnchorLocationRegistry.dispatch({url:t.href,lineNumber:t.lineNumber}))return;if(WebInspector.showAnchorLocation(t))return;const n=WebInspector.ProfilesPanelDescriptor.ProfileURLRegExp.exec(t.href);if(n){WebInspector.showPanel("profiles").showProfile(n[1],n[2]);return}var r=t.href.asParsedURL();if(r&&r.scheme==="webkit-link-action"){if(r.host==="show-panel"){var i=r.path.substring(1);WebInspector.panel(i)&&WebInspector.showPanel(i)}return}InspectorFrontendHost.openInNewTab(t.href)}var t=e.target.enclosingNodeOrSelfWithNodeName("a");if(!t||t.target==="_blank")return;e.consume(!0),WebInspector.followLinkTimeout&&clearTimeout(WebInspector.followLinkTimeout);if(t.preventFollowOnDoubleClick){e.detail===1&&(WebInspector.followLinkTimeout=setTimeout(n,333));return}n()},WebInspector.openResource=function(e,t){var n=WebInspector.resourceForURL(e);t&&n?WebInspector.showPanel("resources").showResource(n):InspectorFrontendHost.openInNewTab(e)},WebInspector._registerShortcuts=function(){var e=WebInspector.KeyboardShortcut,t=WebInspector.shortcutsScreen.section(WebInspector.UIString("All Panels")),n=[e.makeDescriptor("[",e.Modifiers.CtrlOrMeta),e.makeDescriptor("]",e.Modifiers.CtrlOrMeta)];t.addRelatedKeys(n,WebInspector.UIString("Go to the panel to the left/right")),n=[e.makeDescriptor("[",e.Modifiers.CtrlOrMeta|e.Modifiers.Alt),e.makeDescriptor("]",e.Modifiers.CtrlOrMeta|e.Modifiers.Alt)],t.addRelatedKeys(n,WebInspector.UIString("Go back/forward in panel history"));var r=WebInspector.UIString("Toggle console");WebInspector.experimentsSettings.openConsoleWithCtrlTilde.isEnabled()?t.addKey(e.makeDescriptor(e.Keys.Esc),r):t.addKey(e.makeDescriptor(e.Keys.Tilde,e.Modifiers.CtrlOrMeta),r),t.addKey(e.makeDescriptor("f",e.Modifiers.CtrlOrMeta),WebInspector.UIString("Search"));var i=WebInspector.AdvancedSearchController.createShortcut();t.addKey(i,WebInspector.UIString("Search across all sources"));var s=WebInspector.InspectElementModeController.createShortcut();t.addKey(s,WebInspector.UIString("Select node to inspect"));var o=WebInspector.KeyboardShortcut.makeDescriptor("o",WebInspector.KeyboardShortcut.Modifiers.CtrlOrMeta);t.addKey(o,WebInspector.UIString("Go to source")),WebInspector.isMac()&&(n=[e.makeDescriptor("g",e.Modifiers.Meta),e.makeDescriptor("g",e.Modifiers.Meta|e.Modifiers.Shift)],t.addRelatedKeys(n,WebInspector.UIString("Find next/previous")));var u=WebInspector.GoToLineDialog.createShortcut();t.addKey(u,WebInspector.UIString("Go to line")),n=[e.Keys.F1,e.makeDescriptor("?")],t.addAlternateKeys(n,WebInspector.UIString("Show general settings"))},WebInspector.documentKeyDown=function(e){if(WebInspector.currentFocusElement()&&WebInspector.currentFocusElement().handleKeyEvent){WebInspector.currentFocusElement().handleKeyEvent(e);if(e.handled){e.consume(!0);return}}if(WebInspector.inspectorView.currentPanel()){WebInspector.inspectorView.currentPanel().handleShortcut(e);if(e.handled){e.consume(!0);return}}if(WebInspector.searchController.handleShortcut(e))return;if(WebInspector.advancedSearchController.handleShortcut(e))return;if(WebInspector.inspectElementModeController&&WebInspector.inspectElementModeController.handleShortcut(e))return;switch(e.keyIdentifier){case"U+004F":case"U+0050":!e.shiftKey&&!e.altKey&&WebInspector.KeyboardShortcut.eventHasCtrlOrMeta(e)&&(WebInspector.showPanel("scripts").showGoToSourceDialog(),e.consume(!0));break;case"U+0052":WebInspector.KeyboardShortcut.eventHasCtrlOrMeta(e)&&(DebuggerAgent.setSkipAllPauses(!0,!0),PageAgent.reload(e.shiftKey),e.consume(!0));if(window.DEBUG&&e.altKey){WebInspector.reload();return}break;case"F5":WebInspector.isMac()||(PageAgent.reload(e.ctrlKey||e.shiftKey),e.consume(!0))}var t=WebInspector.KeyboardShortcut.eventHasCtrlOrMeta(e)&&!e.altKey&&!InspectorFrontendHost.isStub;switch(e.keyCode){case 107:case 187:t&&(WebInspector._zoomIn(),e.consume(!0));break;case 109:case 189:t&&(WebInspector._zoomOut(),e.consume(!0));break;case 48:t&&!e.shiftKey&&(WebInspector._resetZoom(),e.consume(!0))}},WebInspector.postDocumentKeyDown=function(e){const t=WebInspector.isMac()?"U+003F":"U+00BF";if(e.keyIdentifier==="F1"||e.keyIdentifier===t&&e.shiftKey&&(!WebInspector.isBeingEdited(e.target)||e.metaKey)){this.settingsController.showSettingsScreen(WebInspector.SettingsScreen.Tabs.General),e.consume(!0);return}const n="U+001B";if(e.handled)return;var r=WebInspector.experimentsSettings.openConsoleWithCtrlTilde.isEnabled();if(e.keyIdentifier===n){if(WebInspector.searchController.isSearchVisible()){WebInspector.searchController.closeSearch();return}!this._toggleConsoleButton.toggled&&WebInspector.drawer.visible?this.closeViewInDrawer():(this._toggleConsoleButton.toggled||!r)&&this._toggleConsoleButtonClicked()}WebInspector.experimentsSettings.openConsoleWithCtrlTilde.isEnabled()&&e.keyCode===WebInspector.KeyboardShortcut.Keys.Tilde.code&&WebInspector.KeyboardShortcut.eventHasCtrlOrMeta(e)&&this._toggleConsoleButtonClicked()},WebInspector.documentCanCopy=function(e){WebInspector.inspectorView.currentPanel()&&WebInspector.inspectorView.currentPanel().handleCopyEvent&&e.preventDefault()},WebInspector.documentCopy=function(e){WebInspector.inspectorView.currentPanel()&&WebInspector.inspectorView.currentPanel().handleCopyEvent&&WebInspector.inspectorView.currentPanel().handleCopyEvent(e),WebInspector.documentCopyEventFired(e)},WebInspector.documentCopyEventFired=function(e){},WebInspector.contextMenuEventFired=function(e){(e.handled||e.target.hasStyleClass("popup-glasspane"))&&e.preventDefault()},WebInspector.showPanel=function(e){return WebInspector.inspectorView.showPanel(e)},WebInspector.panel=function(e){return WebInspector.inspectorView.panel(e)},WebInspector.bringToFront=function(){InspectorFrontendHost.bringToFront()},WebInspector.log=function(e,t,n){function i(){return WebInspector.ConsoleMessage&&WebInspector.RemoteObject&&r.console}function s(){var e=WebInspector.log.queued;if(!e)return;for(var t=0;t<e.length;++t)u(e[t]);delete WebInspector.log.queued}function o(){if(!i())return;clearInterval(WebInspector.log.interval),delete WebInspector.log.interval,s()}function u(e){var i=WebInspector.ConsoleMessage.create(WebInspector.ConsoleMessage.MessageSource.Other,t||WebInspector.ConsoleMessage.MessageLevel.Debug,e);r.console.addMessage(i),n&&WebInspector.showConsole()}var r=this;if(!i()){WebInspector.log.queued||(WebInspector.log.queued=[]),WebInspector.log.queued.push(e),WebInspector.log.interval||(WebInspector.log.interval=setInterval(o,1e3));return}s(),u(e)},WebInspector.showErrorMessage=function(e){WebInspector.log(e,WebInspector.ConsoleMessage.MessageLevel.Error,!0)},WebInspector.inspect=function(e,t){var n=WebInspector.RemoteObject.fromPayload(e);if(n.subtype==="node"){function r(e){WebInspector._updateFocusedNode(e),n.release()}n.pushNodeToFrontend(r);return}if(n.type==="function"){function i(e,t){n.release();if(e){console.error(e);return}var r=WebInspector.debuggerModel.rawLocationToUILocation(t.location);if(!r)return;WebInspector.showPanel("scripts").showUILocation(r)}DebuggerAgent.getFunctionDetails(n.objectId,i.bind(this));return}t.databaseId?WebInspector.showPanel("resources").selectDatabase(WebInspector.databaseModel.databaseForId(t.databaseId)):t.domStorageId?WebInspector.showPanel("resources").selectDOMStorage(WebInspector.domStorageModel.storageForId(t.domStorageId)):t.copyToClipboard&&InspectorFrontendHost.copyText(n.value),n.release()},WebInspector.detached=function(e){WebInspector.socket._detachReason=e,(new WebInspector.RemoteDebuggingTerminatedScreen(e)).showModal()},WebInspector.targetCrashed=function(){(new WebInspector.HelpScreenUntilReload(WebInspector.UIString("Inspected target crashed"),WebInspector.UIString("Inspected target has crashed. Once it reloads we will attach to it automatically."))).showModal()},WebInspector._inspectNodeRequested=function(e){WebInspector._updateFocusedNode(e.data)},WebInspector._updateFocusedNode=function(e){WebInspector.inspectElementModeController&&WebInspector.inspectElementModeController.enabled()&&(InspectorFrontendHost.bringToFront(),WebInspector.inspectElementModeController.disable()),WebInspector.showPanel("elements").revealAndSelectNode(e)},WebInspector.showAnchorLocation=function(e){var t=this.panels[e.preferredPanel];return t&&WebInspector._showAnchorLocationInPanel(e,t)?!0:WebInspector._showAnchorLocationInPanel(e,this.panel("scripts"))?!0:WebInspector._showAnchorLocationInPanel(e,this.panel("resources"))?!0:WebInspector._showAnchorLocationInPanel(e,this.panel("network"))?!0:!1},WebInspector._showAnchorLocationInPanel=function(e,t){return!t||!t.canShowAnchorLocation(e)?!1:(e.hasStyleClass("webkit-html-external-link")&&(e.removeStyleClass("webkit-html-external-link"),e.addStyleClass("webkit-html-resource-link")),WebInspector.inspectorView.setCurrentPanel(t),t.showAnchorLocation(e),!0)},WebInspector.evaluateInConsole=function(e,t){this.showConsole(),this.consoleView.evaluateUsingTextPrompt(e,t)},WebInspector.addMainEventListeners=function(e){e.addEventListener("keydown",this.documentKeyDown.bind(this),!0),e.addEventListener("keydown",this.postDocumentKeyDown.bind(this),!1),e.addEventListener("beforecopy",this.documentCanCopy.bind(this),!0),e.addEventListener("copy",this.documentCopy.bind(this),!1),e.addEventListener("contextmenu",this.contextMenuEventFired.bind(this),!0),e.addEventListener("click",this.documentClick.bind(this),!0)},WebInspector.Zoom={Table:[.25,.33,.5,.66,.75,.9,1,1.1,1.25,1.5,1.75,2,2.5,3,4,5],DefaultOffset:6},WebInspector.setInspectedTabId=function(e){WebInspector._inspectedTabId=e},WebInspector.getSelectionBackgroundColor=function(){return InspectorFrontendHost.getSelectionBackgroundColor()},WebInspector.getSelectionForegroundColor=function(){return InspectorFrontendHost.getSelectionForegroundColor()},window.DEBUG=!0;