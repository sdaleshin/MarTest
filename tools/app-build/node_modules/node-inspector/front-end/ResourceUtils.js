/*
 * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.
 * Copyright (C) 2007 Matt Lilek (pewtermoose@gmail.com).
 * Copyright (C) 2009 Joseph Pecoraro
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 *
 * 1.  Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 * 2.  Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimer in the
 *     documentation and/or other materials provided with the distribution.
 * 3.  Neither the name of Apple Computer, Inc. ("Apple") nor the names of
 *     its contributors may be used to endorse or promote products derived
 *     from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS "AS IS" AND ANY
 * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

WebInspector.resourceForURL=function(e){return WebInspector.resourceTreeModel.resourceForURL(e)},WebInspector.forAllResources=function(e){WebInspector.resourceTreeModel.forAllResources(e)},WebInspector.displayNameForURL=function(e){if(!e)return"";var t=WebInspector.resourceForURL(e);if(t)return t.displayName;var n=WebInspector.workspace.uiSourceCodeForURL(e);if(n)return n.displayName();if(!WebInspector.inspectedPageURL)return e.trimURL("");var r=WebInspector.inspectedPageURL.asParsedURL(),i=r?r.lastPathComponent:r,s=WebInspector.inspectedPageURL.indexOf(i);if(s!==-1&&s+i.length===WebInspector.inspectedPageURL.length){var o=WebInspector.inspectedPageURL.substring(0,s);if(e.startsWith(o))return e.substring(s)}if(!r)return e;var u=e.trimURL(r.host);return u==="/"?r.host+"/":u},WebInspector.linkifyStringAsFragmentWithCustomLinkifier=function(e,t){var n=document.createDocumentFragment(),r=/(?:[a-zA-Z][a-zA-Z0-9+.-]{2,}:\/\/|data:|www\.)[\w$\-_+*'=\|\/\\(){}[\]^%@&#~,:;.!?]{2,}[\w$\-_+*=\|\/\\({^%@&#~]/,i=/:(\d+)(:(\d+))?$/;while(e){var s=r.exec(e);if(!s)break;s=s[0];var o=e.indexOf(s),u=e.substring(0,o);n.appendChild(document.createTextNode(u));var a=s,f=s.startsWith("www.")?"http://"+s:s,l=i.exec(f),c,h;l&&(f=f.substring(0,f.length-l[0].length),c=parseInt(l[1],10),c=isNaN(c)?undefined:c-1,typeof l[3]=="string"&&(h=parseInt(l[3],10),h=isNaN(h)?undefined:h-1));var p=t(a,f,c,h);n.appendChild(p),e=e.substring(o+s.length,e.length)}return e&&n.appendChild(document.createTextNode(e)),n},WebInspector.linkifyStringAsFragment=function(e){function t(e,t,n,r){var i=!WebInspector.resourceForURL(t)&&!WebInspector.workspace.uiSourceCodeForURL(t),s=WebInspector.linkifyURLAsNode(t,e,undefined,i);return typeof n!="undefined"&&(s.lineNumber=n,s.preferredPanel="scripts",typeof r!="undefined"&&(s.columnNumber=r)),s}return WebInspector.linkifyStringAsFragmentWithCustomLinkifier(e,t)},WebInspector.linkifyURLAsNode=function(e,t,n,r,i){t||(t=e),n=n?n+" ":"",n+=r?"webkit-html-external-link":"webkit-html-resource-link";var s=document.createElement("a");s.href=sanitizeHref(e),s.className=n;if(typeof i=="undefined")s.title=e;else if(typeof i!="string"||i.length)s.title=i;return s.textContent=t.trimMiddle(WebInspector.Linkifier.MaxLengthForDisplayedURLs),r&&s.setAttribute("target","_blank"),s},WebInspector.formatLinkText=function(e,t){var n=e?WebInspector.displayNameForURL(e):WebInspector.UIString("(program)");return typeof t=="number"&&(n+=":"+(t+1)),n},WebInspector.linkifyResourceAsNode=function(e,t,n,r){var i=WebInspector.formatLinkText(e,t),s=WebInspector.linkifyURLAsNode(e,i,n,!1,r);return s.lineNumber=t,s},WebInspector.linkifyRequestAsNode=function(e){var t=WebInspector.linkifyURLAsNode(e.url);return t.preferredPanel="network",t.requestId=e.requestId,t},WebInspector.contentAsDataURL=function(e,t,n){const r=1048576;return e==null||e.length>r?null:"data:"+t+(n?";base64,":",")+e};