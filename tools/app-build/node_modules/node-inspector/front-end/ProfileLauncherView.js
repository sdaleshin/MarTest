/*
 * Copyright (C) 2011 Google Inc. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

WebInspector.ProfileLauncherView=function(e){WebInspector.View.call(this),this._panel=e,this.element.addStyleClass("profile-launcher-view"),this.element.addStyleClass("panel-enabler-view"),this._contentElement=this.element.createChild("div","profile-launcher-view-content"),this._innerContentElement=this._contentElement.createChild("div"),this._controlButton=this._contentElement.createChild("button","control-profiling"),this._controlButton.addEventListener("click",this._controlButtonClicked.bind(this),!1)},WebInspector.ProfileLauncherView.prototype={addProfileType:function(e){var t=this._innerContentElement.createChild("h1");t.textContent=e.description;var n=e.decorationElement();n&&this._innerContentElement.appendChild(n),this._isInstantProfile=e.isInstantProfile(),this._isEnabled=e.isEnabled()},_controlButtonClicked:function(){this._panel.toggleRecordButton()},_updateControls:function(){this._isEnabled?this._controlButton.removeAttribute("disabled"):this._controlButton.setAttribute("disabled",""),this._isInstantProfile?(this._controlButton.removeStyleClass("running"),this._controlButton.textContent=WebInspector.UIString("Take Snapshot")):this._isProfiling?(this._controlButton.addStyleClass("running"),this._controlButton.textContent=WebInspector.UIString("Stop")):(this._controlButton.removeStyleClass("running"),this._controlButton.textContent=WebInspector.UIString("Start"))},profileStarted:function(){this._isProfiling=!0,this._updateControls()},profileFinished:function(){this._isProfiling=!1,this._updateControls()},updateProfileType:function(e){this._isInstantProfile=e.isInstantProfile(),this._isEnabled=e.isEnabled(),this._updateControls()},__proto__:WebInspector.View.prototype},WebInspector.MultiProfileLauncherView=function(e){WebInspector.ProfileLauncherView.call(this,e);var t=this._innerContentElement.createChild("h1");t.textContent=WebInspector.UIString("Select profiling type"),this._profileTypeSelectorForm=this._innerContentElement.createChild("form"),this._innerContentElement.createChild("div","flexible-space")},WebInspector.MultiProfileLauncherView.EventTypes={ProfileTypeSelected:"profile-type-selected"},WebInspector.MultiProfileLauncherView.prototype={addProfileType:function(e){var t=!this._profileTypeSelectorForm.children.length,n=this._profileTypeSelectorForm.createChild("label");n.textContent=e.name;var r=document.createElement("input");n.insertBefore(r,n.firstChild),r.type="radio",r.name="profile-type",r.style.hidden=!0,t&&(r.checked=t,this.dispatchEventToListeners(WebInspector.MultiProfileLauncherView.EventTypes.ProfileTypeSelected,e)),r.addEventListener("change",this._profileTypeChanged.bind(this,e),!1);var i=n.createChild("p");i.textContent=e.description;var s=e.decorationElement();s&&n.appendChild(s)},_controlButtonClicked:function(){this._panel.toggleRecordButton()},_updateControls:function(){WebInspector.ProfileLauncherView.prototype._updateControls.call(this);var e=this._profileTypeSelectorForm.elements;for(var t=0;t<e.length;++t)e[t].type==="radio"&&(e[t].disabled=this._isProfiling)},_profileTypeChanged:function(e,t){this.dispatchEventToListeners(WebInspector.MultiProfileLauncherView.EventTypes.ProfileTypeSelected,e),this._isInstantProfile=e.isInstantProfile(),this._isEnabled=e.isEnabled(),this._updateControls()},profileStarted:function(){this._isProfiling=!0,this._updateControls()},profileFinished:function(){this._isProfiling=!1,this._updateControls()},__proto__:WebInspector.ProfileLauncherView.prototype};