/*
 * Copyright (C) 2012 Google Inc. All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are
 * met:
 *
 *     * Redistributions of source code must retain the above copyright
 * notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above
 * copyright notice, this list of conditions and the following disclaimer
 * in the documentation and/or other materials provided with the
 * distribution.
 *     * Neither the name of Google Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

WebInspector.ExtensionPanel=function(e,t){WebInspector.Panel.call(this,e),this.setHideOnDetach(),this._statusBarItems=[];var n=new WebInspector.ExtensionView(e,t,"extension panel");n.show(this.element),this.setDefaultFocusedElement(n.defaultFocusedElement())},WebInspector.ExtensionPanel.prototype={defaultFocusedElement:function(){return WebInspector.View.prototype.defaultFocusedElement.call(this)},get statusBarItems(){return this._statusBarItems},addStatusBarItem:function(e){this._statusBarItems.push(e)},searchCanceled:function(e){WebInspector.extensionServer.notifySearchAction(this.name,WebInspector.extensionAPI.panels.SearchAction.CancelSearch),WebInspector.Panel.prototype.searchCanceled.apply(this,arguments)},performSearch:function(e,t){WebInspector.extensionServer.notifySearchAction(this.name,WebInspector.extensionAPI.panels.SearchAction.PerformSearch,e)},jumpToNextSearchResult:function(){WebInspector.extensionServer.notifySearchAction(this.name,WebInspector.extensionAPI.panels.SearchAction.NextSearchResult),WebInspector.Panel.prototype.jumpToNextSearchResult.call(this)},jumpToPreviousSearchResult:function(){WebInspector.extensionServer.notifySearchAction(this.name,WebInspector.extensionAPI.panels.SearchAction.PreviousSearchResult),WebInspector.Panel.prototype.jumpToPreviousSearchResult.call(this)},__proto__:WebInspector.Panel.prototype},WebInspector.ExtensionButton=function(e,t,n,r){this._id=e,this.element=document.createElement("button"),this.element.className="status-bar-item extension",this.element.addEventListener("click",this._onClicked.bind(this),!1),this.update(t,n,r)},WebInspector.ExtensionButton.prototype={update:function(e,t,n){typeof e=="string"&&(this.element.style.backgroundImage="url("+e+")"),typeof t=="string"&&(this.element.title=t),typeof n=="boolean"&&(this.element.disabled=n)},_onClicked:function(){WebInspector.extensionServer.notifyButtonClicked(this._id)}},WebInspector.ExtensionSidebarPane=function(e,t){WebInspector.SidebarPane.call(this,e),this.setHideOnDetach(),this._id=t},WebInspector.ExtensionSidebarPane.prototype={setObject:function(e,t,n){this._createObjectPropertiesView(),this._setObject(WebInspector.RemoteObject.fromLocalObject(e),t,n)},setExpression:function(e,t,n,r,i){return this._createObjectPropertiesView(),WebInspector.extensionServer.evaluate(e,!0,!1,n,r,this._onEvaluate.bind(this,t,i))},setPage:function(e){this._objectPropertiesView&&(this._objectPropertiesView.detach(),delete this._objectPropertiesView),this._extensionView&&this._extensionView.detach(!0),this._extensionView=new WebInspector.ExtensionView(this._id,e,"extension fill"),this._extensionView.show(this.bodyElement),this.bodyElement.style.height||this.setHeight("150px")},setHeight:function(e){this.bodyElement.style.height=e},_onEvaluate:function(e,t,n,r,i){n?t(n.toString()):this._setObject(WebInspector.RemoteObject.fromPayload(r),e,t)},_createObjectPropertiesView:function(){if(this._objectPropertiesView)return;this._extensionView&&(this._extensionView.detach(!0),delete this._extensionView),this._objectPropertiesView=new WebInspector.ExtensionNotifierView(this._id),this._objectPropertiesView.show(this.bodyElement)},_setObject:function(e,t,n){if(!this._objectPropertiesView){n("operation cancelled");return}this._objectPropertiesView.element.removeChildren();var r=new WebInspector.ObjectPropertiesSection(e,t);t||r.headerElement.addStyleClass("hidden"),r.expanded=!0,r.editable=!1,this._objectPropertiesView.element.appendChild(r.element),n()},__proto__:WebInspector.SidebarPane.prototype};