/*!
 * socket.io-node
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

function HTMLFile(e,t,n){HTTPTransport.call(this,e,t,n)}var HTTPTransport=require("./http");exports=module.exports=HTMLFile,HTMLFile.prototype.__proto__=HTTPTransport.prototype,HTMLFile.prototype.name="htmlfile",HTMLFile.prototype.handleRequest=function(e){HTTPTransport.prototype.handleRequest.call(this,e),e.method=="GET"&&(e.res.writeHead(200,{"Content-Type":"text/html; charset=UTF-8",Connection:"keep-alive","Transfer-Encoding":"chunked"}),e.res.write("<html><body><script>var _ = function (msg) { parent.s._(msg, document); };</script>"+(new Array(174)).join(" ")))},HTMLFile.prototype.write=function(e){e="<script>_("+JSON.stringify(e).replace(/\//g,"\\/")+");</script>",this.response.write(e)&&(this.drained=!0),this.log.debug(this.name+" writing",e)};