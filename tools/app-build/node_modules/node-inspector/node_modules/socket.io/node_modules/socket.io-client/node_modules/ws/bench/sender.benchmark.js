/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

var benchmark=require("benchmark"),Sender=require("../").Sender,suite=new benchmark.Suite("Sender");require("tinycolor"),require("./util"),suite.on("start",function(){sender=new Sender,sender._socket={write:function(){}}}),suite.on("cycle",function(){sender=new Sender,sender._socket={write:function(){}}}),framePacket=new Buffer(204800),framePacket.fill(99),suite.add("frameAndSend, unmasked (200 kB)",function(){sender.frameAndSend(2,framePacket,!0,!1)}),suite.add("frameAndSend, masked (200 kB)",function(){sender.frameAndSend(2,framePacket,!0,!0)}),suite.on("cycle",function(e,t){console.log("\n  "+suite.name.grey,t.name.white.bold),console.log("  "+[t.hz.toFixed(2).cyan+" ops/sec".grey,t.count.toString().white+" times executed".grey,"benchmark took ".grey+t.times.elapsed.toString().white+" sec.".grey].join(", ".grey))}),module.parent?module.exports=suite:suite.run();