var sys=require("util"),assert=require("assert"),XMLHttpRequest=require("../lib/XMLHttpRequest").XMLHttpRequest,xhr;xhr=new XMLHttpRequest,xhr.onreadystatechange=function(){this.readyState==4&&(assert.equal("Hello World",this.responseText),this.close(),runSync())};var url="file://"+__dirname+"/testdata.txt";xhr.open("GET",url),xhr.send();var runSync=function(){xhr=new XMLHttpRequest,xhr.onreadystatechange=function(){this.readyState==4&&(assert.equal("Hello World",this.responseText),this.close(),sys.puts("done"))},xhr.open("GET",url,!1),xhr.send()};