/**
 * This is my js Parser: Ze. It's actually the post-dev pre-cleanup version. Clearly.
 * Some optimizations have been applied :)
 * (c) Peter van der Zee, qfox.nl
 * @param {String} inp Input
 * @param {Tokenizer} tok
 * @param {Array} stack The tokens will be put in this array. If you're looking for the AST, this would be it :)
 */

function ZeParser(e,t,n,r){this.input=e,this.tokenizer=t,this.stack=n,this.stack.root=!0,this.scope=n.scope=[{value:"this",isDeclared:!0,isEcma:!0,thisIsGlobal:!0}],this.scope.global=!0,this.statementLabels=[],this.errorStack=[],n.scope=this.scope,n.labels=this.statementLabels,this.regexLhsStart=ZeParser.regexLhsStart,this.regexStartKeyOrReserved=ZeParser.regexStartKeyOrReserved,this.hashStartKeyOrReserved=ZeParser.hashStartKeyOrReserved,this.regexIsKeywordOrReserved=ZeParser.regexIsKeywordOrReserved,this.regexAssignments=ZeParser.regexAssignments,this.regexNonAssignmentBinaryExpressionOperators=ZeParser.regexNonAssignmentBinaryExpressionOperators,this.regexUnaryKeywords=ZeParser.regexUnaryKeywords,this.hashUnaryKeywordStart=ZeParser.hashUnaryKeywordStart,this.regexUnaryOperators=ZeParser.regexUnaryOperators,this.regexLiteralKeywords=ZeParser.regexLiteralKeywords,this.testing={"this":1,"null":1,"true":1,"false":1},this.ast=!r}if(typeof exports!="undefined"){var Tokenizer=require("./Tokenizer").Tokenizer;exports.ZeParser=ZeParser}ZeParser.parse=function(e,t){var n=new Tokenizer(e),r=[];try{var i=new ZeParser(e,n,r);return t&&(i.ast=!1),i.parse(),r}catch(s){return console.log("Parser has a bug for this input, please report it :)",s),null}},ZeParser.createParser=function(e){var t=new Tokenizer(e),n=[];try{var r=new ZeParser(e,t,n);return r.parse(),r}catch(i){return console.log("Parser has a bug for this input, please report it :)",i),null}},ZeParser.prototype={input:null,tokenizer:null,stack:null,scope:null,statementLabels:null,errorStack:null,ast:null,parse:function(e){e?e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,this.stack):e=this.tokenizer.storeCurrentAndFetchNextToken(!1,null,this.stack,!0),e=this.eatSourceElements(e,this.stack);var t=!1;do e&&e.name!=12&&(e.name!=14&&this.failignore("UnexpectedToken",e,this.stack),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,this.stack),t=!0);while(e&&e.name==14);return t&&e&&e.name!=12&&(e=this.parse(e)),this.tokenizer.errorEscape&&(this.stack.push(this.tokenizer.errorEscape),this.tokenizer.errorEscape=null),e},eatSemiColon:function(e,t){if(e.value==";")e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t);else if(e.name!=12&&(e.semi||!e.newline&&e.value!="}")&&(!e.newline||e.value!="++"&&e.value!="--"))this.failignore("NoASI",e,t);else{var n={start:e.start,stop:e.start,name:13};t.push(n),this.tokenizer.addTokenToStreamBefore(n,e)}return e.semi=!0,e},eatExpressions:function(e,t,n,r,i,s){if(this.ast){var o=n;n=[],n.desc="expressions",n.nextBlack=t.tokposb,o.push(n);var u=0}var a=!0;do{var f=!1;a||(t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),t.name<=6||this.regexLhsStart.test(t.value)||(t=this.failsafe("ExpectedAnotherExpressionComma",t)));if(this.ast){++u;var l=n;n=[],n.desc="expression",n.nextBlack=t.tokposb,l.push(n)}var c=!0;while(c){if(this.ast){var h=n;n=[],n.desc="sub-expression",n.nextBlack=t.tokposb,h.push(n);var p=0}var d=!1,v=null;while(!s&&(v=t.value&&this.hashUnaryKeywordStart[t.value[0]]&&this.regexUnaryKeywords.test(t.value)||t.name==11&&this.regexUnaryOperators.test(t.value)))v&&(t.isUnaryOp=!0),this.ast&&t.value=="new"&&++p,t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),t.name<=6||this.regexLhsStart.test(t.value)||(t=this.failsafe("ExpectedAnotherExpressionRhs",t)),d=!0;d&&(e=!1);var m=!1;if(t.value=="("){if(this.ast){var g=n;n=[],n.desc="grouped",n.nextBlack=t.tokposb,g.push(n);var y=t;t.isGroupStart=!0}t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),t.name<=6||this.regexLhsStart.test(t.value)||(t=this.failsafe("GroupingShouldStartWithExpression",t)),t=this.eatExpressions(!1,t,n),t.value!=")"&&(t=this.failsafe("UnclosedGroupingOperator",t)),this.ast&&(t.twin=y,y.twin=t,t.isGroupStop=!0,n[n.length-1].desc=="expressions"&&(y.expressionArg=n[n.length-1])),t=this.tokenizer.storeCurrentAndFetchNextToken(!0,t,n),this.ast&&(n=g),m=!0}else if(t.value=="["){if(this.ast){n.sub="array literal",n.hasArrayLiteral=!0;var b=t;t.isArrayLiteralStart=!0,this.scope.arrays||(this.scope.arrays=[]),t.arrayId=this.scope.arrays.length,this.scope.arrays.push(t),t.targetScope=this.scope}t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n);while(t.value==",")t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n);var w=!0;while(w&&t.value!="]"){w=!1,!(t.name<=6||this.regexLhsStart.test(t.value))&&t.name!=14&&(t=this.failsafe("ArrayShouldStartWithExpression",t)),t=this.eatExpressions(!1,t,n,!0);while(t.value==",")w=!0,t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n)}t.value!="]"&&(t=this.failsafe("UnclosedPropertyBracket",t)),this.ast&&(t.twin=b,b.twin=t,t.isArrayLiteralStop=!0),t=this.tokenizer.storeCurrentAndFetchNextToken(!0,t,n);while(t.value=="++"||t.value=="--")this.failignore("InvalidPostfixOperandArray",t,n),t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n)}else if(t.value=="{"){if(this.ast){n.sub="object literal",n.hasObjectLiteral=!0,t.isObjectLiteralStart=!0,this.scope.objects||(this.scope.objects=[]),t.objectId=this.scope.objects.length,this.scope.objects.push(t);var E=t;t.targetScope=this.scope;var S=t}t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),t.name==12&&(t=this.failsafe("ObjectLiteralExpectsColonAfterName",t));while(t.value!="}"&&t.name!=14){!t.isNumber&&!t.isString&&t.name!=2&&(t=this.failsafe("IllegalPropertyNameToken",t));if(this.ast){var x=n;n=[],n.desc="objlit pair",n.isObjectLiteralPair=!0,n.nextBlack=t.tokposb,x.push(n);var T=n;n=[],n.desc="objlit pair name",n.nextBlack=t.tokposb,T.push(n),T.sub="data";var N=t;N.isPropertyName=!0}var C=t.value;t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),this.ast&&(n=T);if(C=="get")if(t.value==":")this.ast&&(N.isPropertyOf=E),t=this.eatObjectLiteralColonAndBody(t,n);else{this.ast&&(t.isPropertyOf=E,T.sub="getter",T.isAccessor=!0),!t.isNumber&&!t.isString&&t.name!=2&&(t=this.failsafe("IllegalGetterSetterNameToken",t,!0)),t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),t.value!="("&&(t=this.failsafe("GetterSetterNameFollowedByOpenParen",t));if(this.ast)var y=t;t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),t.value!=")"&&(t=this.failsafe("GetterHasNoArguments",t)),this.ast&&(t.twin=y,y.twin=t),t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),t=this.eatFunctionBody(t,n)}else if(C=="set")if(t.value==":")this.ast&&(N.isPropertyOf=E),t=this.eatObjectLiteralColonAndBody(t,n);else{this.ast&&(t.isPropertyOf=E,T.sub="setter",T.isAccessor=!0),!t.isNumber&&!t.isString&&t.name!=2&&(t=this.failsafe("IllegalGetterSetterNameToken",t)),t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),t.value!="("&&(t=this.failsafe("GetterSetterNameFollowedByOpenParen",t));if(this.ast)var y=t;t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),t.name!=2&&(t.value==")"?t=this.failsafe("SettersMustHaveArgument",t):t=this.failsafe("IllegalSetterArgumentNameToken",t)),t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),t.value!=")"&&(t.value==","?t=this.failsafe("SettersOnlyGetOneArgument",t):t=this.failsafe("SetterHeaderShouldHaveClosingParen",t)),this.ast&&(t.twin=y,y.twin=t),t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),t=this.eatFunctionBody(t,n)}else this.ast&&(N.isPropertyOf=E),t=this.eatObjectLiteralColonAndBody(t,n);this.ast&&(n=x),t.value==","?(t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),t.value==","&&(t=this.failsafe("IllegalDoubleCommaInObjectLiteral",t))):t.value!="}"&&(t=this.failsafe("UnclosedObjectLiteral",t))}this.ast&&(t.twin=S,S.twin=t,t.isObjectLiteralStop=!0),t=this.tokenizer.storeCurrentAndFetchNextToken(!0,t,n);while(t.value=="++"||t.value=="--")this.failignore("InvalidPostfixOperandObject",t,n),t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n)}else if(t.value=="function"){if(this.ast){var k=n;n=[],n.desc="func expr",n.isFunction=!0,n.nextBlack=t.tokposb,this.scope.functions||(this.scope.functions=[]),t.functionId=this.scope.functions.length,this.scope.functions.push(t),k.push(n);var L=this.scope;t.scope=n.scope=this.scope=[this.scope,{value:"this",isDeclared:!0,isEcma:!0,functionStack:n},{value:"arguments",isDeclared:!0,isEcma:!0,varType:["Object"]}],this.scope.upper=L,this.scope.scopeFor=t,t.targetScope=L,t.isFuncExprKeyword=!0,t.functionStack=n}var A=t;t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),e&&t.value==":"&&(t=this.failsafe("LabelsMayNotBeReserved",t)),t.name==2&&(A.funcName=t,t.meta="func expr name",t.varType=["Function"],t.functionStack=n,this.ast&&this.scope.push({value:t.value}),this.hashStartKeyOrReserved[t.value[0]]&&this.regexIsKeywordOrReserved.test(t.value)&&(t=this.failsafe("FunctionNameMustNotBeReserved",t)),t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n)),t=this.eatFunctionParametersAndBody(t,n,!0,A);while(t.value=="++"||t.value=="--")this.failignore("InvalidPostfixOperandFunction",t,n),t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n);this.ast&&(n=k,this.scope=L)}else if(t.name<=6){var O=t;t.name==2?(!this.regexLiteralKeywords.test(t.value)&&this.hashStartKeyOrReserved[t.value[0]]&&this.regexIsKeywordOrReserved.test(t.value)&&(s?this.failignore("BreakOrContinueArgMustBeJustIdentifier",t,n):t.value=="else"?this.failignore("DidNotExpectElseHere",t,n):this.failignore("UnexpectedToken",t,n)),m=!0):s&&(t=this.failsafe("BreakOrContinueArgMustBeJustIdentifier",t)),this.ast&&(s||(t.meta="lead value",t.leadValue=!0)),t=this.tokenizer.storeCurrentAndFetchNextToken(!0,t,n);if(e&&t.value==":"){O.name!=2&&this.failignore("LabelsMayOnlyBeIdentifiers",t,n),e=!0,t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),O.isLabel=!0,this.ast&&(delete O.meta,O.isLabelDeclaration=!0,this.statementLabels.push(O.value),n.desc="labeled statement");var M=this.errorStack.length;return t=this.eatStatement(!1,t,n),t.error&&t.error.msg==ZeParser.Errors.UnableToParseStatement.msg&&(t.error=new ZeParser.Error("LabelRequiresStatement"),this.errorStack[M]=t.error),t.wasLabel=!0,t}e=!1}else if(t.value!="}")if(t.name==14){do{if(t.tokenError){var _=new ZeParser.Error("TokenizerError",t);_.msg+=": "+t.error.msg,this.errorStack.push(_),this.failSpecial({start:t.start,stop:t.start,name:14,error:_},t,n)}t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n)}while(t.name==14)}else{if(t.name==12)return t;this.failignore("UnknownToken",t,n),t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n)}while(t.value=="."||t.value=="["||t.value=="("){s&&(t=this.failsafe("BreakOrContinueArgMustBeJustIdentifier",t));if(t.value==".")t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),t.name!=2&&this.failignore("PropertyNamesMayOnlyBeIdentifiers",t,n),this.ast&&(t.isPropertyName=!0),t=this.tokenizer.storeCurrentAndFetchNextToken(!0,t,n),m=!0;else if(t.value=="["){if(this.ast){var b=t;t.propertyAccessStart=!0}t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),t.name<=6||this.regexLhsStart.test(t.value)||(t.value=="]"?t=this.failsafe("SquareBracketsMayNotBeEmpty",t):t=this.failsafe("SquareBracketExpectsExpression",t)),t=this.eatExpressions(!1,t,n),t.value!="]"&&(t=this.failsafe("UnclosedSquareBrackets",t)),this.ast&&(t.twin=b,t.propertyAccessStop=!0,b.twin=t,n[n.length-1].desc=="expressions"&&(b.expressionArg=n[n.length-1])),t=this.tokenizer.storeCurrentAndFetchNextToken(!0,t,n),m=!0}else if(t.value=="("){if(this.ast){var y=t;t.isCallExpressionStart=!0,p&&(t.parensBelongToNew=!0,--p)}t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n);if(t.name<=6||this.regexLhsStart.test(t.value))t=this.eatExpressions(!1,t,n);t.value!=")"&&(t=this.failsafe("UnclosedCallParens",t)),this.ast&&(t.twin=y,y.twin=t,t.isCallExpressionStop=!0,n[n.length-1].desc=="expressions"&&(y.expressionArg=n[n.length-1])),t=this.tokenizer.storeCurrentAndFetchNextToken(!0,t,n),m=!1}}(t.value=="++"||t.value=="--")&&!t.newline&&(s&&(t=this.failsafe("BreakOrContinueArgMustBeJustIdentifier",t)),t=this.tokenizer.storeCurrentAndFetchNextToken(!0,t,n)),this.ast&&(n=h);do{var D=!1;if(!i&&t.value=="in"||t.value=="instanceof"||t.name==11&&(t.isAssignment=this.regexAssignments.test(t.value))||this.regexNonAssignmentBinaryExpressionOperators.test(t.value)){t.isAssignment&&(m?f&&this.failignore("AssignmentNotAllowedAfterNonAssignmentInExpression",t,n):this.failignore("IllegalLhsForAssignment",t,n)),s&&(t=this.failsafe("BreakOrContinueArgMustBeJustIdentifier",t)),t.isAssignment||(f=!0);if(this.ast){t.isBinaryOperator=!0;var P=n;n=[],n.desc="operator-expression",n.isBinaryOperator=!0,n.sub=t.value,n.nextBlack=t.tokposb,P.sub=t.value,n.isAssignment=t.isAssignment,P.push(n)}D=t.value=="?",t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),this.ast&&(n=P);if(D){t.name<=6||this.regexLhsStart.test(t.value)||this.failignore("InvalidCenterTernaryExpression",t,n),t=this.eatExpressions(!1,t,n,!0,i),t.value!=":"&&(t.value==","?t=this.failsafe("TernarySecondExpressionCanNotContainComma",t):t=this.failsafe("UnfinishedTernaryOperator",t));if(this.ast){var P=n;n=[],n.desc="operator-expression",n.sub=t.value,n.nextBlack=t.tokposb,P.sub=t.value,n.isAssignment=t.isAssignment,P.push(n)}t=this.tokenizer.storeCurrentAndFetchNextToken(!1,t,n),this.ast&&(n=P),t=this.eatExpressions(!1,t,n,!0,i)}}else c=!1}while(D);c&&!(t.name<=6||this.regexLhsStart.test(t.value))&&this.failignore("InvalidRhsExpression",t,n)}this.ast&&(n=l),e=a=!1}while(!r&&t.value==",");return this.ast&&(n.length||(o.length=o.length-1),o.numberOfExpressions=u,o[0]&&(o[0].numberOfExpressions=u),n.expressionCount=u),t},eatFunctionDeclaration:function(e,t){if(this.ast){t.push(t=[]);var n=this.scope;t.desc="func decl",t.isFunction=!0,t.nextBlack=e.tokposb,this.scope.functions||(this.scope.functions=[]),e.functionId=this.scope.functions.length,this.scope.functions.push(e),e.scope=t.scope=this.scope=[this.scope,{value:"this",isDeclared:!0,isEcma:!0,functionStack:t},{value:"arguments",isDeclared:!0,isEcma:!0,varType:["Object"]}],this.scope.scopeFor=e,e.targetScope=n,e.functionStack=t,e.isFuncDeclKeyword=!0}var r=e;return e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.name!=2&&(e=this.failsafe("FunctionDeclarationsMustHaveName",e)),this.hashStartKeyOrReserved[e.value[0]]&&this.regexIsKeywordOrReserved.test(e.value)&&this.failignore("FunctionNameMayNotBeReserved",e,t),this.ast&&(r.funcName=e,n.push({value:e.value}),e.meta="func decl name",e.varType=["Function"],e.functionStack=t),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e=this.eatFunctionParametersAndBody(e,t,!1,r),this.ast&&(this.scope=n),e},eatObjectLiteralColonAndBody:function(e,t){if(this.ast){var n=t;t=[],t.desc="objlit pair colon",t.nextBlack=e.tokposb,n.push(t)}e.value!=":"&&(e=this.failsafe("ObjectLiteralExpectsColonAfterName",e)),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),this.ast&&(t=n);var r=e;return e=this.eatExpressions(!1,e,t,!0),e==r&&(e=this.failsafe("ObjectLiteralMissingPropertyValue",e)),e},eatFunctionParametersAndBody:function(e,t,n,r){if(e.value!="(")e=this.failsafe("ExpectingFunctionHeaderStart",e);else if(this.ast){var i=e;r.lhp=e}e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t);if(e.name==2){this.hashStartKeyOrReserved[e.value[0]]&&this.regexIsKeywordOrReserved.test(e.value)&&this.failignore("FunctionArgumentsCanNotBeReserved",e,t),this.ast&&(r.paramNames||(r.paramNames=[]),t.paramNames=r.paramNames,r.paramNames.push(e),this.scope.push({value:e.value}),e.meta="parameter"),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t);while(e.value==",")e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.name!=2?this.failignore("FunctionParametersMustBeIdentifiers",e,t):this.hashStartKeyOrReserved[e.value[0]]&&this.regexIsKeywordOrReserved.test(e.value)&&this.failignore("FunctionArgumentsCanNotBeReserved",e,t),this.ast&&(this.scope.push({value:e.value}),e.meta="parameter",e.name==2&&r.paramNames.push(e)),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t)}return this.ast&&i&&(e.twin=i,i.twin=e,r.rhp=e),e.value!=")"&&(e=this.failsafe("ExpectedFunctionHeaderClose",e)),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e=this.eatFunctionBody(e,t,n,r),e},eatFunctionBody:function(e,t,n,r){if(this.ast){t.push(t=[]),t.desc="func body",t.nextBlack=e.tokposb;var i=this.statementLabels;this.statementLabels=[],t.labels=this.statementLabels}e.value!="{"&&(e=this.failsafe("ExpectedFunctionBodyCurlyOpen",e));if(this.ast){var s=e;r&&(r.lhc=s)}return e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e=this.eatSourceElements(e,t),e.value!="}"&&(e=this.failsafe("ExpectedFunctionBodyCurlyClose",e)),this.ast&&(e.twin=s,s.twin=e,r&&(r.rhc=e)),e=this.tokenizer.storeCurrentAndFetchNextToken(n,e,t),this.ast&&(this.statementLabels=i),e},eatVar:function(e,t){return this.ast&&(t.push(t=[]),t.desc="statement",t.sub="var",t.nextBlack=e.tokposb,e.stack=t,e.isVarKeyword=!0),e=this.eatVarDecl(e,t),e=this.eatSemiColon(e,t),e},eatVarDecl:function(e,t,n){if(this.ast){t.push(t=[]),t.desc="var decl",t.nextBlack=e.tokposb;var r=this.scope;while(r.catchScope)r=r[0]}var i=!0,s=0;do{++s,e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t);if(this.ast){var o=t,t=[];t.desc="single var decl",t.varStack=o,t.nextBlack=e.tokposb,o.push(t);var u=t;t=[],t.desc="sub-expression",t.nextBlack=e.tokposb,u.push(t)}e.name==12?i?e=this.failsafe("VarKeywordMissingName",e):e=this.failsafe("IllegalTrailingComma",e):e.name!=2?e=this.failsafe("VarNamesMayOnlyBeIdentifiers",e):this.hashStartKeyOrReserved[e.value[0]]&&this.regexIsKeywordOrReserved.test(e.value)&&(e=this.failsafe("VarNamesCanNotBeReserved",e)),this.ast&&(e.meta="var name",r.push({value:e.value})),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),this.ast&&(t=u),e.value=="="&&(this.ast&&(u=t,t=[],t.desc="operator-expression",t.sub="=",t.nextBlack=e.tokposb,u.push(t),t.isAssignment=!0),e.isInitialiser=!0,e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),this.ast&&(t=u),e.name<=6||e.name==14||this.regexLhsStart.test(e.value)||(e=this.failsafe("VarInitialiserExpressionExpected",e)),e=this.eatExpressions(!1,e,t,!0,n)),this.ast&&(t=o),i=!1}while(e.value==",");return this.ast&&(t.varsDeclared=s),e},eatIf:function(e,t){this.ast&&(t.push(t=[]),t.desc="statement",t.sub="if",t.hasElse=!1,t.nextBlack=e.tokposb);var n=e;e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!="("&&(e=this.failsafe("ExpectedStatementHeaderOpen",e));if(this.ast){var r=e;e.statementHeaderStart=!0}return e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.name<=6||this.regexLhsStart.test(e.value)||(e=this.failsafe("StatementHeaderIsNotOptional",e)),e=this.eatExpressions(!1,e,t),e.value!=")"&&(e=this.failsafe("ExpectedStatementHeaderClose",e)),this.ast&&(e.twin=r,e.statementHeaderStop=!0,r.twin=e,t[t.length-1].desc=="expressions"&&(r.expressionArg=t[t.length-1])),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e=this.eatStatement(!1,e,t),e&&e.value=="else"&&(this.ast&&(n.hasElse=e),e=this.eatElse(e,t)),e},eatElse:function(e,t){return this.ast&&(t.hasElse=!0,t.push(t=[]),t.desc="statement",t.sub="else",t.nextBlack=e.tokposb),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e=this.eatStatement(!1,e,t),e},eatDo:function(e,t){if(this.ast){t.push(t=[]),t.desc="statement",t.sub="do",t.isIteration=!0,t.nextBlack=e.tokposb,this.statementLabels.push("");var n=e}e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e=this.eatStatement(!1,e,t),e.value!="while"&&(e=this.failsafe("DoShouldBeFollowedByWhile",e)),this.ast&&(e.hasDo=n),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!="("&&(e=this.failsafe("ExpectedStatementHeaderOpen",e));if(this.ast){var r=e;e.statementHeaderStart=!0}return e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.name<=6||this.regexLhsStart.test(e.value)||(e=this.failsafe("StatementHeaderIsNotOptional",e)),e=this.eatExpressions(!1,e,t),e.value!=")"&&(e=this.failsafe("ExpectedStatementHeaderClose",e)),this.ast&&(e.twin=r,e.statementHeaderStop=!0,e.isForDoWhile=!0,r.twin=e,t[t.length-1].desc=="expressions"&&(r.expressionArg=t[t.length-1])),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e=this.eatSemiColon(e,t),e},eatWhile:function(e,t){this.ast&&(t.push(t=[]),t.desc="statement",t.sub="while",t.isIteration=!0,t.nextBlack=e.tokposb,this.statementLabels.push("")),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!="("&&(e=this.failsafe("ExpectedStatementHeaderOpen",e));if(this.ast){var n=e;e.statementHeaderStart=!0}return e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.name<=6||this.regexLhsStart.test(e.value)||(e=this.failsafe("StatementHeaderIsNotOptional",e)),e=this.eatExpressions(!1,e,t),e.value!=")"&&(e=this.failsafe("ExpectedStatementHeaderClose",e)),this.ast&&(e.twin=n,e.statementHeaderStop=!0,n.twin=e,t[t.length-1].desc=="expressions"&&(n.expressionArg=t[t.length-1])),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e=this.eatStatement(!1,e,t),e},eatFor:function(e,t){this.ast&&(t.push(t=[]),t.desc="statement",t.sub="for",t.isIteration=!0,t.nextBlack=e.tokposb,this.statementLabels.push("")),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!="("&&(e=this.failsafe("ExpectedStatementHeaderOpen",e));if(this.ast){var n=e;e.statementHeaderStart=!0,e.forHeaderStart=!0}e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value=="var"?e=this.eatVarDecl(e,t,!0):e.value!=";"&&(e.name<=6||this.regexLhsStart.test(e.value)||this.failignore("StatementHeaderIsNotOptional",e,t),e=this.eatExpressions(!1,e,t,!1,!0));if(e.value=="in"){var r=t[t.length-1];r.varsDeclared>1&&this.failignore("ForInCanOnlyDeclareOnVar",e,t),this.ast&&(t.forType="in",e.forFor=!0),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e=this.eatExpressions(!1,e,t)}else{e.value!=";"&&(e=this.failsafe("ForHeaderShouldHaveSemisOrIn",e)),this.ast&&(t.forType="each",e.forEachHeaderStart=!0),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t);if(e.name<=6||this.regexLhsStart.test(e.value))e=this.eatExpressions(!1,e,t);e.value!=";"&&(e=this.failsafe("ExpectedSecondSemiOfForHeader",e)),this.ast&&(e.forEachHeaderStop=!0),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t);if(e.name<=6||this.regexLhsStart.test(e.value))e=this.eatExpressions(!1,e,t)}return e.value!=")"&&(e=this.failsafe("ExpectedStatementHeaderClose",e)),this.ast&&(e.twin=n,e.statementHeaderStop=!0,e.forHeaderStop=!0,n.twin=e,e.forType=="in"&&t[t.length-1].desc=="expressions"&&(n.expressionArg=t[t.length-1])),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e=this.eatStatement(!1,e,t),e},eatContinue:function(e,t){this.ast&&(t.push(t=[]),t.desc="statement",t.sub="continue",t.nextBlack=e.tokposb,e.restricted=!0),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t);if(!e.newline&&e.value!=";"&&e.name!=12&&e.value!="}"){if(this.ast){e.isLabel=!0,e.isLabelTarget=!0;var n=e}e=this.eatExpressions(!1,e,t,!0,!1,!0),this.ast&&(t.hasLabel=n!=e),e.value!=";"&&!e.newline&&e.name!=12&&e.value!="}"&&(e=this.failsafe("BreakOrContinueArgMustBeJustIdentifier",e))}return e=this.eatSemiColon(e,t),e},eatBreak:function(e,t){if(this.ast){var n=t;t=[],t.desc="statement",t.sub="break",t.nextBlack=e.tokposb,n.push(t),e.restricted=!0}e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t);if(!e.newline&&e.value!=";"&&e.name!=12&&e.value!="}"){if(this.ast){e.isLabel=!0,e.isLabelTarget=!0;var r=e}e=this.eatExpressions(!1,e,t,!0,!1,!0),this.ast&&(t.hasLabel=r!=e),e.value!=";"&&!e.newline&&e.name!=12&&e.value!="}"&&(e=this.failsafe("BreakOrContinueArgMustBeJustIdentifier",e))}return e=this.eatSemiColon(e,t),e},eatReturn:function(e,t){return this.ast&&(t.push(t=[]),t.desc="statement",t.sub="return",t.nextBlack=e.tokposb,t.returnFor=this.scope.scopeFor,e.restricted=!0),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),!e.newline&&e.value!=";"&&e.name!=12&&e.value!="}"&&(e=this.eatExpressions(!1,e,t)),e=this.eatSemiColon(e,t),e},eatThrow:function(e,t){return this.ast&&(t.push(t=[]),t.desc="statement",t.sub="throw",t.nextBlack=e.tokposb,e.restricted=!0),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.newline&&(e=this.failsafe("ThrowCannotHaveReturn",e)),e.value==";"&&(e=this.failsafe("ThrowMustHaveArgument",e)),e=this.eatExpressions(!1,e,t),e=this.eatSemiColon(e,t),e},eatSwitch:function(e,t){this.ast&&(t.push(t=[]),t.desc="statement",t.sub="switch",t.nextBlack=e.tokposb,this.statementLabels.push("")),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!="("&&(e=this.failsafe("ExpectedStatementHeaderOpen",e));if(this.ast){var n=e;e.statementHeaderStart=!0}e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.name<=6||this.regexLhsStart.test(e.value)||this.failignore("StatementHeaderIsNotOptional",e,t),e=this.eatExpressions(!1,e,t),e.value!=")"&&(e=this.failsafe("ExpectedStatementHeaderClose",e)),this.ast&&(e.twin=n,e.statementHeaderStop=!0,n.twin=e,t[t.length-1].desc=="expressions"&&(n.expressionArg=t[t.length-1])),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!="{"&&(e=this.failsafe("SwitchBodyStartsWithCurly",e));if(this.ast)var r=e;e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t);var i=!1;while(e.value=="case"||!t.parsedSwitchDefault&&e.value=="default")i=!0,e=this.eatSwitchClause(e,t);return!i&&e.value!="}"&&(e=this.failsafe("SwitchBodyMustStartWithClause",e)),t.parsedSwitchDefault&&e.value=="default"&&this.failignore("SwitchCannotHaveDoubleDefault",e,t),e.value!="}"&&e.name!=14&&(e=this.failsafe("SwitchBodyEndsWithCurly",e)),this.ast&&(e.twin=r,r.twin=e),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e},eatSwitchClause:function(e,t){return e=this.eatSwitchHeader(e,t),e=this.eatSwitchBody(e,t),e},eatSwitchHeader:function(e,t){if(this.ast){var n=t;t.push(t=[]),t.desc="switch clause header",t.nextBlack=e.tokposb}return e.value=="case"?e=this.eatSwitchCaseHead(e,t):(this.ast&&(n.hasDefaultClause=!0),e=this.eatSwitchDefaultHead(e,t)),this.ast&&(t.push(t=[]),t.desc="colon",t.nextBlack=e.tokposb),e.value!=":"&&(e=this.failsafe("SwitchClausesEndWithColon",e)),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e},eatSwitchBody:function(e,t){this.ast&&(t.push(t=[]),t.desc="switch clause body",t.nextBlack=e.tokposb);var n=null;while(e.value!="default"&&e.value!="case"&&e.value!="}"&&e.name!=14&&e.name!=12&&n!=e)n=e,e=this.eatStatement(!0,e,t);return n==e&&this.failsafe("UnexpectedInputSwitch",e),e},eatSwitchCaseHead:function(e,t){if(this.ast){t.sub="case";var n=t;t.push(t=[]),t.desc="case",t.nextBlack=e.tokposb,e.isCase=!0}return e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value==":"?this.failignore("CaseMissingExpression",e,t):(this.ast&&(n.push(t=[]),t.desc="case arg",t.nextBlack=e.tokposb),e=this.eatExpressions(!1,e,t)),e},eatSwitchDefaultHead:function(e,t){return this.ast&&(t.sub="default",t.push(t=[]),t.desc="case",t.nextBlack=e.tokposb,e.isDefault=!0),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e},eatTryCatchFinally:function(e,t){return this.ast&&(t.push(t=[]),t.desc="statement",t.sub="try",t.nextBlack=e.tokposb),e=this.eatTry(e,t),e.value=="catch"&&(this.ast&&(t.hasCatch=!0),e=this.eatCatch(e,t)),e.value=="finally"&&(this.ast&&(t.hasFinally=!0),e=this.eatFinally(e,t)),t.tryHasCatchOrFinally||this.failignore("TryMustHaveCatchOrFinally",e,t),e},eatTry:function(e,t){e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!="{"&&(e=this.failsafe("MissingTryBlockCurlyOpen",e));if(this.ast){t.push(t=[]),t.desc="statement",t.sub="tryblock",t.nextBlack=e.tokposb;var n=e}return e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!="}"&&(e=this.eatStatements(e,t)),e.value!="}"&&(e=this.failsafe("MissingTryBlockCurlyClose",e)),this.ast&&(e.twin=n,n.twin=e),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e},eatCatch:function(e,t){t.tryHasCatchOrFinally=!0;if(this.ast){t.push(t=[]),t.desc="statement",t.sub="catch",t.nextBlack=e.tokposb;var n=this.scope;e.scope=this.scope=t.scope=[this.scope],this.scope.catchScope=!0;var r=n;while(r.catchScope)r=r[0];r.catches||(r.catches=[]),e.catchId=r.catches.length,r.catches.push(e),e.targetScope=r,e.catchScope=this.scope,this.scope.scopeFor=e,n.global?this.scope.push(n[0]):n.catchScope?(this.scope.push(n[1]),n[2]&&n[2].value=="arguments"&&this.scope.push(n[2])):this.scope.push(n[1],n[2])}e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!="("&&(e=this.failsafe("CatchHeaderMissingOpen",e));if(this.ast)var i=e;e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.name!=2&&(e=this.failsafe("MissingCatchParameter",e)),this.hashStartKeyOrReserved[e.value[0]]&&this.regexIsKeywordOrReserved.test(e.value)&&this.failignore("CatchParameterNameMayNotBeReserved",e,t),this.ast&&(e.meta="var name",this.scope.push(e),e.isCatchVar=!0),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!=")"&&(e=this.failsafe("CatchHeaderMissingClose",e)),this.ast&&(e.twin=i,i.twin=e),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!="{"&&(e=this.failsafe("MissingCatchBlockCurlyOpen",e));if(this.ast)var s=e;return e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!="}"&&(e=this.eatStatements(e,t)),e.value!="}"&&(e=this.failsafe("MissingCatchBlockCurlyClose",e)),this.ast&&(e.twin=s,s.twin=e),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),this.ast&&(this.scope=n),e},eatFinally:function(e,t){t.tryHasCatchOrFinally=!0,this.ast&&(t.push(t=[]),t.desc="statement",t.sub="finally",t.nextBlack=e.tokposb),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!="{"&&(e=this.failsafe("MissingFinallyBlockCurlyOpen",e));if(this.ast)var n=e;return e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!="}"&&(e=this.eatStatements(e,t)),e.value!="}"&&(e=this.failsafe("MissingFinallyBlockCurlyClose",e)),this.ast&&(e.twin=n,n.twin=e),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e},eatDebugger:function(e,t){return this.ast&&(t.push(t=[]),t.desc="statement",t.sub="debugger",t.nextBlack=e.tokposb),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e=this.eatSemiColon(e,t),e},eatWith:function(e,t){this.ast&&(t.push(t=[]),t.desc="statement",t.sub="with",t.nextBlack=e.tokposb),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value!="("&&(e=this.failsafe("ExpectedStatementHeaderOpen",e));if(this.ast){var n=e;e.statementHeaderStart=!0}return e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.name<=6||this.regexLhsStart.test(e.value)||(e=this.failsafe("StatementHeaderIsNotOptional",e)),e=this.eatExpressions(!1,e,t),e.value!=")"&&(e=this.failsafe("ExpectedStatementHeaderClose",e)),this.ast&&(e.twin=n,e.statementHeaderStop=!0,n.twin=e,t[t.length-1].desc=="expressions"&&(n.expressionArg=t[t.length-1])),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e=this.eatStatement(!1,e,t),e},eatFunction:function(e,t){var n=new ZeParser.Error;this.errorStack.push(n);var r={start:e.stop,stop:e.stop,name:14,error:n};return this.specialError(r,e,t),e=this.eatFunctionDeclaration(e,t),e},eatLabelOrExpression:function(e,t){if(this.ast){var n=t;t=[],t.desc="statement",t.sub="expression",t.nextBlack=e.tokposb,n.push(t)}return e=this.eatExpressions(!0,e,t),e.wasLabel?this.ast&&(t.sub="labeled"):(this.ast&&(t.sub="expression"),e=this.eatSemiColon(e,t)),e},eatBlock:function(e,t){if(this.ast){t.sub="block";var n=e}return e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e.value=="}"?this.ast&&(t.isEmptyBlock=!0):e=this.eatStatements(e,t),e.value!="}"&&(e=this.failsafe("BlockCurlyClose",e)),this.ast&&(e.twin=n,n.twin=e),e=this.tokenizer.storeCurrentAndFetchNextToken(!1,e,t),e},eatStatements:function(e,t){while(e!=(e=this.eatStatement(true,e,t)));return e},eatStatement:function(e,t,n){if(!t&&e)return t;if(this.ast){t.statementStart=!0;var r=n;n=[],n.desc="statement-parent",n.nextBlack=t.tokposb,r.push(n);var i=this.statementLabels;this.statementLabels=[i],n.labels=this.statementLabels}if(t.name==2)switch(t.value){case"var":t=this.eatVar(t,n);break;case"if":t=this.eatIf(t,n);break;case"do":t=this.eatDo(t,n);break;case"while":t=this.eatWhile(t,n);break;case"for":t=this.eatFor(t,n);break;case"continue":t=this.eatContinue(t,n);break;case"break":t=this.eatBreak(t,n);break;case"return":t=this.eatReturn(t,n);break;case"throw":t=this.eatThrow(t,n);break;case"switch":t=this.eatSwitch(t,n);break;case"try":t=this.eatTryCatchFinally(t,n);break;case"debugger":t=this.eatDebugger(t,n);break;case"with":t=this.eatWith(t,n);break;case"function":this.failignore("StatementMayNotStartWithFunction",t,n),t=this.eatFunctionDeclaration(t,n);break;default:t=this.eatLabelOrExpression(t,n)}else t.value=="{"?t=this.eatBlock(t,n):t.isString||t.isNumber||t.name==1||this.regexLhsStart.test(t.value)?(t=this.eatExpressions(!1,t,n),t=this.eatSemiColon(t,n)):t.value==";"?(t.emptyStatement=!0,t=this.eatSemiColon(t,n)):e?this.ast&&(t.statementStart=!0):(this.ast&&(t.statementStart=!1),t=this.failsafe("UnableToParseStatement",t));return this.ast&&(n.length||(r.length=r.length-1),this.statementLabels=i),t},eatSourceElements:function(e,t){while(e!=n){var n=e;e.value=="function"?e=this.eatFunctionDeclaration(e,t):e=this.eatStatement(!0,e,t)}return e},failsafe:function(e,t,n){var r=new ZeParser.Error(e,t);this.errorStack.push(r),n||(this.tokenizer.errorEscape&&this.stack.push(this.tokenizer.errorEscape),this.tokenizer.errorEscape=t);var i={start:t.start,stop:t.start,len:0,name:14,error:r,value:""};return this.tokenizer.addTokenToStreamBefore(i,t),i},failignore:function(e,t,n){var r=new ZeParser.Error(e,t);this.errorStack.push(r);var i={start:t.start,stop:t.start,len:0,name:14,error:r,value:""};n.push(i),this.tokenizer.addTokenToStreamBefore(i,t)},failSpecial:function(e,t,n){n.push(e),this.tokenizer.addTokenToStreamBefore(e,t)},0:0},ZeParser.testSuite=function(e){var t=0,n=0,r=+(new Date);for(var i=0;i<e.length;++i){var s=e[i],o=s[0],u=s[s.length-1],a=[];try{(new ZeParser(o,new Tokenizer(o),a)).parse(),++t}catch(f){++n}document.getElementsByTagName("div")[0].innerHTML="Ze parser test suite finished ("+(+(new Date)-r)+" ms). ok:"+t+", fail:"+n}},ZeParser.regexLhsStart=/[\+\-\~\!\(\{\[]/,ZeParser.regexStartKeyOrReserved=/[bcdefinrstvw]/,ZeParser.hashStartKeyOrReserved=Object.create?Object.create(null,{b:{value:1},c:{value:1},d:{value:1},e:{value:1},f:{value:1},i:{value:1},n:{value:1},r:{value:1},s:{value:1},t:{value:1},v:{value:1},w:{value:1}}):{b:1,c:1,d:1,e:1,f:1,i:1,n:1,r:1,s:1,t:1,v:1,w:1},ZeParser.regexIsKeywordOrReserved=/^break$|^catch$|^continue$|^debugger$|^default$|^delete$|^do$|^else$|^finally$|^for$|^function$|^if$|^in$|^instanceof$|^new$|^return$|^switch$|^case$|^this$|^true$|^false$|^null$|^throw$|^try$|^typeof$|^var$|^void$|^while$|^with$|^class$|^const$|^enum$|^export$|^extends$|^import$|^super$/,ZeParser.regexAssignments=/^[\+\-\*\%\&\|\^\/]?=$|^\<\<\=$|^\>{2,3}\=$/,ZeParser.regexNonAssignmentBinaryExpressionOperators=/^[\+\-\*\%\|\^\&\?\/]$|^[\<\>]\=?$|^[\=\!]\=\=?$|^\<\<|\>\>\>?$|^\&\&$|^\|\|$/,ZeParser.regexUnaryKeywords=/^delete$|^void$|^typeof$|^new$/,ZeParser.hashUnaryKeywordStart=Object.create?Object.create(null,{d:{value:1},v:{value:1},t:{value:1},n:{value:1}}):{d:1,v:1,t:1,n:1},ZeParser.regexUnaryOperators=/[\+\-\~\!]/,ZeParser.regexLiteralKeywords=/^this$|^null$|^true$|^false$/,ZeParser.Error=function(e,t){this.msg=ZeParser.Errors[e].msg,this.before=ZeParser.Errors[e].before,this.match=t},ZeParser.Errors={NoASI:{msg:"Expected semi-colon, was unable to apply ASI"},ExpectedAnotherExpressionComma:{msg:"expecting another (left hand sided) expression after the comma"},ExpectedAnotherExpressionRhs:{msg:"expected a rhs expression"},UnclosedGroupingOperator:{msg:"Unclosed grouping operator"},GroupingShouldStartWithExpression:{msg:"The grouping operator (`(`) should start with a left hand sided expression"},ArrayShouldStartWithExpression:{msg:"The array literal (`[`) should start with a left hand sided expression"},UnclosedPropertyBracket:{msg:"Property bracket was not closed after expression (expecting `]`)"},IllegalPropertyNameToken:{msg:"Object literal property names can only be assigned as strings, numbers or identifiers"},IllegalGetterSetterNameToken:{msg:"Name of a getter/setter can only be assigned as strings, numbers or identifiers"},GetterSetterNameFollowedByOpenParen:{msg:"The name of the getter/setter should immediately be followed by the opening parenthesis `(`"},GetterHasNoArguments:{msg:"The opening parenthesis `(` of the getter should be immediately followed by the closing parenthesis `)`, the getter cannot have an argument"},IllegalSetterArgumentNameToken:{msg:"Expecting the name of the argument of a setter, can only be assigned as strings, numbers or identifiers"},SettersOnlyGetOneArgument:{msg:"Setters have one and only one argument, missing the closing parenthesis `)`"},SetterHeaderShouldHaveClosingParen:{msg:"After the first argument of a setter should come a closing parenthesis `)`"},SettersMustHaveArgument:{msg:"Setters must have exactly one argument defined"},UnclosedObjectLiteral:{msg:"Expected to find a comma `,` for the next expression or a closing curly brace `}` to end the object literal"},FunctionNameMustNotBeReserved:{msg:"Function name may not be a keyword or a reserved word"},ExpressionMayNotStartWithKeyword:{msg:"Expressions may not start with keywords or reserved words that are not in this list: [this, null, true, false, void, typeof, delete, new]"},LabelsMayOnlyBeIdentifiers:{msg:"Label names may only be defined as an identifier"},LabelsMayNotBeReserved:{msg:"Labels may not be a keyword or a reserved word"},UnknownToken:{msg:"Unknown token encountered, dont know how to proceed"},PropertyNamesMayOnlyBeIdentifiers:{msg:"The tokens of property names accessed through the dot operator may only be identifiers"},SquareBracketExpectsExpression:{msg:"The square bracket property access expects an expression"},SquareBracketsMayNotBeEmpty:{msg:"Square brackets may never be empty, expecting an expression"},UnclosedSquareBrackets:{msg:"Unclosed square bracket encountered, was expecting `]` after the expression"},UnclosedCallParens:{msg:"Unclosed call parenthesis, expecting `)` after the optional expression"},InvalidCenterTernaryExpression:{msg:"Center expression of ternary operator should be a regular expression (but may not contain the comma operator directly)"},UnfinishedTernaryOperator:{msg:"Encountered a ternary operator start (`?`) but did not find the required colon (`:`) after the center expression"},TernarySecondExpressionCanNotContainComma:{msg:'The second and third expressions of the ternary operator can/may not "directly" contain a comma operator'},InvalidRhsExpression:{msg:"Expected a right hand side expression after the operator (which should also be a valid lhs) but did not find one"},FunctionDeclarationsMustHaveName:{msg:"Function declaration must have name"},FunctionNameMayNotBeReserved:{msg:"Function name may not be a keyword or reserved word"},ExpectingFunctionHeaderStart:{msg:"Expected the opening parenthesis of the function header"},FunctionArgumentsCanNotBeReserved:{msg:"Function arguments may not be keywords or reserved words"},FunctionParametersMustBeIdentifiers:{msg:"Function arguments must be identifiers"},ExpectedFunctionHeaderClose:{msg:"Expected the closing parenthesis `)` of the function header"},ExpectedFunctionBodyCurlyOpen:{msg:"Expected the opening curly brace `{` for the function body"},ExpectedFunctionBodyCurlyClose:{msg:"Expected the closing curly brace `}` for the function body"},VarNamesMayOnlyBeIdentifiers:{msg:"Missing variable name, must be a proper identifier"},VarNamesCanNotBeReserved:{msg:"Variable names may not be keywords or reserved words"},VarInitialiserExpressionExpected:{msg:"The initialiser of the variable statement should be an expression without comma"},ExpectedStatementHeaderOpen:{msg:"Expected opening parenthesis `(` for statement header"},StatementHeaderIsNotOptional:{msg:"Statement header must not be empty"},ExpectedStatementHeaderClose:{msg:"Expected closing parenthesis `)` for statement header"},DoShouldBeFollowedByWhile:{msg:"The do-while statement requires the `while` keyword after the expression"},ExpectedSecondSemiOfForHeader:{msg:"Expected the second semi-colon of the for-each header"},ForHeaderShouldHaveSemisOrIn:{msg:"The for-header should contain at least the `in` operator or two semi-colons (`;`)"},SwitchBodyStartsWithCurly:{msg:"The body of a switch statement starts with a curly brace `{`"},SwitchClausesEndWithColon:{msg:"Switch clauses (`case` and `default`) end with a colon (`:`)"},SwitchCannotHaveDoubleDefault:{msg:"Switches cannot have more than one `default` clause"},SwitchBodyEndsWithCurly:{msg:"The body of a switch statement ends with a curly brace `}`"},MissingTryBlockCurlyOpen:{msg:"Missing the opening curly brace (`{`) for the block of the try statement"},MissingTryBlockCurlyClose:{msg:"Missing the closing curly brace (`}`) for the block of the try statement"},CatchHeaderMissingOpen:{msg:"Missing the opening parenthesis of the catch header"},MissingCatchParameter:{msg:"Catch clauses should have exactly one argument which will be bound to the error object being thrown"},CatchParameterNameMayNotBeReserved:{msg:"Catch clause parameter may not be a keyword or reserved word"},CatchHeaderMissingClose:{msg:"Missing the closing parenthesis of the catch header"},MissingCatchBlockCurlyOpen:{msg:"Missing the opening curly brace (`{`) for the block of the catch statement"},MissingCatchBlockCurlyClose:{msg:"Missing the closing curly brace (`}`) for the block of the catch statement"},MissingFinallyBlockCurlyOpen:{msg:"Missing the opening curly brace (`{`) for the block of the finally statement"},MissingFinallyBlockCurlyClose:{msg:"Missing the closing curly brace (`}`) for the block of the finally statement"},StatementMayNotStartWithFunction:{msg:"statements may not start with function...",before:!0},BlockCurlyClose:{msg:"Expected the closing curly (`}`) for a block statement"},BlockCurlyOpen:{msg:"Expected the closing curly (`}`) for a block statement"},UnableToParseStatement:{msg:"Was unable to find a statement when it was requested"},IllegalDoubleCommaInObjectLiteral:{msg:"A double comma in object literals is not allowed"},ObjectLiteralExpectsColonAfterName:{msg:"After every property name (identifier, string or number) a colon (`:`) should follow"},ThrowMustHaveArgument:{msg:"The expression argument for throw is not optional"},ThrowCannotHaveReturn:{msg:"There may not be a return between throw and the start of its expression argument"},SwitchBodyMustStartWithClause:{msg:"The body of a switch clause must start with at a case or default clause (but may be empty, which would be silly)"},BreakOrContinueArgMustBeJustIdentifier:{msg:"The argument to a break or continue statement must be exactly and only an identifier (an existing label)"},AssignmentNotAllowedAfterNonAssignmentInExpression:{msg:"An assignment is not allowed if it is preceeded by a non-expression operator in the same expression-level"},IllegalLhsForAssignment:{msg:"Illegal left hand side for assignment (you cannot assign to things like string literals, number literals or function calls}"},VarKeywordMissingName:{msg:"Var keyword should be followed by a variable name"},IllegalTrailingComma:{msg:"Illegal trailing comma found"},ObjectLiteralMissingPropertyValue:{msg:"Missing object literal property value"},TokenizerError:{msg:"Tokenizer encountered unexpected input"},LabelRequiresStatement:{msg:"Saw a label without the (required) statement following"},DidNotExpectElseHere:{msg:"Did not expect an else here. To what if should it belong? Maybe you put a ; after the if-block? (if(x){};else{})"},UnexpectedToken:{msg:"Found an unexpected token and have no idea why"},InvalidPostfixOperandArray:{msg:"You cannot apply ++ or -- to an array"},InvalidPostfixOperandObject:{msg:"You cannot apply ++ or -- to an object"},InvalidPostfixOperandFunction:{msg:"You cannot apply ++ or -- to a function"},CaseMissingExpression:{msg:"Case expects an expression before the colon"},TryMustHaveCatchOrFinally:{msg:"The try statement must have a catch or finally block"},UnexpectedInputSwitch:{msg:"Unexpected input while parsing a switch clause..."},ForInCanOnlyDeclareOnVar:{msg:"For-in header can only introduce one new variable"}};