/*!
 * ws: a node.js websocket client
 * Copyright(c) 2011 Einar Otto Stangvik <einaros@gmail.com>
 * MIT Licensed
 */

module.exports.BufferUtil={merge:function(e,t){var n=0;for(var r=0,i=t.length;r<i;++r){var s=t[r];s.copy(e,n),n+=s.length}},mask:function(e,t,n,r,i){var s=t.readUInt32LE(0,!0),o=0;for(;o<i-3;o+=4){var u=s^e.readUInt32LE(o,!0);u<0&&(u=4294967296+u),n.writeUInt32LE(u,r+o,!0)}switch(i%4){case 3:n[r+o+2]=e[o+2]^t[2];case 2:n[r+o+1]=e[o+1]^t[1];case 1:n[r+o]=e[o]^t[0];case 0:}},unmask:function(e,t){var n=t.readUInt32LE(0,!0),r=e.length,i=0;for(;i<r-3;i+=4){var s=n^e.readUInt32LE(i,!0);s<0&&(s=4294967296+s),e.writeUInt32LE(s,i,!0)}switch(r%4){case 3:e[i+2]=e[i+2]^t[2];case 2:e[i+1]=e[i+1]^t[1];case 1:e[i]=e[i]^t[0];case 0:}}};