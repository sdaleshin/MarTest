/**
 * socket.io
 * Copyright(c) 2011 LearnBoost <dev@learnboost.com>
 * MIT Licensed
 */

(function(e,t){var n=e;n.version="0.9.16",n.protocol=1,n.transports=[],n.j=[],n.sockets={},"object"==typeof module&&"function"==typeof require&&(n.util=require("./util").util,n.JSON=require("./json").JSON,n.parser=require("./parser").parser,n.EventEmitter=require("./events").EventEmitter,n.SocketNamespace=require("./namespace").SocketNamespace,n.Transport=require("./transport").Transport,n.transports=["websocket","xhr-polling"],n.Transport.XHR=require("./transports/xhr").XHR,n.transports.forEach(function(e){n.Transport[e]=require("./transports/"+e)[e]}),n.Socket=require("./socket").Socket,n.dist=__dirname+"/../dist",n.builder=require("../bin/builder")),n.connect=function(e,r){var i=n.util.parseUri(e),s,o;t&&t.location&&(i.protocol=i.protocol||t.location.protocol.slice(0,-1),i.host=i.host||(t.document?t.document.domain:t.location.hostname),i.port=i.port||t.location.port),s=n.util.uniqueUri(i);var u={host:i.host,secure:"https"==i.protocol,port:i.port||("https"==i.protocol?443:80),query:i.query||""};n.util.merge(u,r);if(u["force new connection"]||!n.sockets[s])o=new n.Socket(u);return!u["force new connection"]&&o&&(n.sockets[s]=o),o=o||n.sockets[s],o.of(i.path.length>1?i.path:"")}})("object"==typeof module?module.exports:this.io={},this);