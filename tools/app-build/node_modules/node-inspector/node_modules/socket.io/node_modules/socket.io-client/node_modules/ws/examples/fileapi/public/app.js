function onFilesSelected(e){var t=e.srcElement;t.disabled=!0;var n=document.querySelector("div#progress");n.innerHTML="0%";var r=e.target.files,i=r.length,s=0;if(i)var o=new Uploader("ws://localhost:8080",function(){Array.prototype.slice.call(r,0).forEach(function(e){if(e.name=="."){--i;return}o.sendFile(e,function(t){if(t){console.log(t);return}++s,n.innerHTML=~~(s/i*100)+"%",console.log("Sent: "+e.name)})})});o.ondone=function(){o.close(),n.innerHTML="100% done, "+i+" files sent."}}window.onload=function(){var e=document.querySelectorAll('[type="file"]');Array.prototype.slice.call(e,0).forEach(function(e){e.addEventListener("change",onFilesSelected,!1)})};