getBufferFromHexString=function(e){var t=e.split(" "),n=new Buffer(t.length);for(var r=0;r<t.length;++r)n[r]=parseInt(t[r],16);return n},getHexStringFromBuffer=function(e){var t="";for(var n=0;n<e.length;++n)t+=padl(e[n].toString(16),2,"0")+" ";return t.trim()},splitBuffer=function(e){var t=new Buffer(Math.ceil(e.length/2));e.copy(t,0,0,t.length);var n=new Buffer(Math.floor(e.length/2));return e.copy(n,0,t.length,t.length+n.length),[t,n]},mask=function(e,t){typeof e=="string"&&(e=new Buffer(e));var n=getBufferFromHexString(t||"34 83 a8 68");for(var r=0;r<e.length;++r)e[r]^=n[r%4];return e},getHybiLengthAsHexString=function(e,t){if(e<126){var n=new Buffer(1);n[0]=(t?128:0)|e}else if(e<65536){var n=new Buffer(3);n[0]=(t?128:0)|126,getBufferFromHexString(pack(4,e)).copy(n,1)}else{var n=new Buffer(9);n[0]=(t?128:0)|127,getBufferFromHexString(pack(16,e)).copy(n,1)}return getHexStringFromBuffer(n)},unpack=function(e){var t=0;for(var n=0;n<e.length;++n)t=n==0?e[n]:t*256+e[n];return t},pack=function(e,t){return padl(t.toString(16),e,"0").replace(/([0-9a-f][0-9a-f])/gi,"$1 ").trim()},padl=function(e,t,n){return(new Array(1+t-e.length)).join(n)+e};