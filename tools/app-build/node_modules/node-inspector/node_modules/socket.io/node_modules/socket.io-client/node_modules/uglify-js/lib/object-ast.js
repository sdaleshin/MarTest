function HOP(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function AST_Node(e){this.parent=e}function DEFINE_NODE_CLASS(e,t,n){function i(e,n){r.apply(this,arguments),t&&t.forEach(function(e,t){this["_"+e]=n[t]}),this.init()}var r=n&&n.BASE||AST_Node;r||(r=AST_Node);var s=i.prototype=new AST_Node;s.node_type=function(){return e},t&&t.forEach(function(e){var t="_"+e;s["set_"+e]=function(e){return this[t]=e,this},s["get_"+e]=function(){return this[t]}}),e!=null&&(BY_TYPE[e]=i);if(n)for(var o in n)HOP(n,o)&&(s[o]=n[o]);return i}var jsp=require("./parse-js"),pro=require("./process"),BY_TYPE={};AST_Node.prototype.init=function(){};var AST_String_Node=DEFINE_NODE_CLASS("string",["value"]),AST_Number_Node=DEFINE_NODE_CLASS("num",["value"]),AST_Name_Node=DEFINE_NODE_CLASS("name",["value"]),AST_Statlist_Node=DEFINE_NODE_CLASS(null,["body"]),AST_Root_Node=DEFINE_NODE_CLASS("toplevel",null,{BASE:AST_Statlist_Node}),AST_Block_Node=DEFINE_NODE_CLASS("block",null,{BASE:AST_Statlist_Node}),AST_Splice_Node=DEFINE_NODE_CLASS("splice",null,{BASE:AST_Statlist_Node}),AST_Var_Node=DEFINE_NODE_CLASS("var",["definitions"]),AST_Const_Node=DEFINE_NODE_CLASS("const",["definitions"]),AST_Try_Node=DEFINE_NODE_CLASS("try",["body","catch","finally"]),AST_Throw_Node=DEFINE_NODE_CLASS("throw",["exception"]),AST_New_Node=DEFINE_NODE_CLASS("new",["constructor","arguments"]),AST_Switch_Node=DEFINE_NODE_CLASS("switch",["expression","branches"]),AST_Switch_Branch_Node=DEFINE_NODE_CLASS(null,["expression","body"]),AST_Break_Node=DEFINE_NODE_CLASS("break",["label"]),AST_Continue_Node=DEFINE_NODE_CLASS("continue",["label"]),AST_Assign_Node=DEFINE_NODE_CLASS("assign",["operator","lvalue","rvalue"]),AST_Dot_Node=DEFINE_NODE_CLASS("dot",["expression","name"]),AST_Call_Node=DEFINE_NODE_CLASS("call",["function","arguments"]),AST_Lambda_Node=DEFINE_NODE_CLASS(null,["name","arguments","body"]),AST_Function_Node=DEFINE_NODE_CLASS("function",null,AST_Lambda_Node),AST_Defun_Node=DEFINE_NODE_CLASS("defun",null,AST_Lambda_Node),AST_If_Node=DEFINE_NODE_CLASS("if",["condition","then","else"]);