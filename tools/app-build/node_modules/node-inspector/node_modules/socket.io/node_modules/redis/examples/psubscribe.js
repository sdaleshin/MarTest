var redis=require("redis"),client1=redis.createClient(),client2=redis.createClient(),client3=redis.createClient(),client4=redis.createClient(),msg_count=0;redis.debug_mode=!1,client1.on("psubscribe",function(e,t){console.log("client1 psubscribed to "+e+", "+t+" total subscriptions"),client2.publish("channeltwo","Me!"),client3.publish("channelthree","Me too!"),client4.publish("channelfour","And me too!")}),client1.on("punsubscribe",function(e,t){console.log("client1 punsubscribed from "+e+", "+t+" total subscriptions"),client4.end(),client3.end(),client2.end(),client1.end()}),client1.on("pmessage",function(e,t,n){console.log("("+e+")"+" client1 received message on "+t+": "+n),msg_count+=1,msg_count===3&&client1.punsubscribe()}),client1.psubscribe("channel*");