var t=require("tap"),origCwd=process.cwd();process.chdir(__dirname);var glob=require("../"),path=require("path");t.test(".",function(e){glob("/b*/**",{globDebug:!0,root:"."},function(n,r){e.ifError(n),e.like(r,[]),e.end()})}),t.test("a",function(e){console.error("root="+path.resolve("a")),glob("/b*/**",{globDebug:!0,root:path.resolve("a")},function(n,r){e.ifError(n);var i=["/b","/b/c","/b/c/d","/bc","/bc/e","/bc/e/f"].map(function(e){return path.join(path.resolve("a"),e).replace(/\\/g,"/")});e.like(r,i),e.end()})}),t.test("root=a, cwd=a/b",function(e){glob("/b*/**",{globDebug:!0,root:"a",cwd:path.resolve("a/b")},function(n,r){e.ifError(n),e.like(r,["/b","/b/c","/b/c/d","/bc","/bc/e","/bc/e/f"].map(function(e){return path.join(path.resolve("a"),e).replace(/\\/g,"/")})),e.end()})}),t.test("cd -",function(e){process.chdir(origCwd),e.end()});