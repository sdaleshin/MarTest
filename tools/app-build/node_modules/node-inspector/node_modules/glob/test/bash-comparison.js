function alphasort(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),e>t?1:e<t?-1:0}function cleanResults(e){return e.map(function(e){return e.replace(/\/+/g,"/").replace(/\/$/,"")}).sort(alphasort).reduce(function(e,t){return t!==e[e.length-1]&&e.push(t),e},[]).sort(alphasort).map(function(e){return process.platform!=="win32"?e:e.replace(/^[a-zA-Z]:[\/\\]+/,"/").replace(/[\\\/]+/g,"/")})}var tap=require("tap"),child_process=require("child_process"),bashResults=require("./bash-results.json"),globs=Object.keys(bashResults),glob=require("../"),path=require("path");process.chdir(path.resolve(__dirname,"..")),globs.forEach(function(e){var t=bashResults[e];if(process.platform==="win32"&&t.some(function(e){return/\/symlink\//.test(e)}))return;tap.test(e,function(n){glob(e,function(r,i){if(r)throw r;i=cleanResults(i),n.deepEqual(i,t,e),n.end()})}),tap.test(e+" sync",function(n){var r=cleanResults(glob.sync(e));n.deepEqual(r,t,"should match shell"),n.end()})});