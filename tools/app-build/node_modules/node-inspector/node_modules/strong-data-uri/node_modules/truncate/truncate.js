(function(e,t){function i(e,t,n){return n.length===e.length||!t.ellipsis?n:(n+=t.ellipsis,n)}function s(e,t,s){var o="",u=!0,a=t,f,l;s=s||{},s.ellipsis=typeof s.ellipsis=="undefined"?n:s.ellipsis;if(!e||e.length===0)return"";u=!0;while(u){r.lastIndex=o.length,u=r.exec(e);if(!u||u.index-o.length>=a)return o+=e.substring(o.length,t),i(e,s,o,t);f=u[0],l=u.index,o+=e.substring(o.length,l+f.length),a-=l+f.length;if(a<=0)break}return i(e,s,o,t)}var n="...",r=/(((ftp|https?):\/\/)[\-\w@:%_\+.~#?,&\/\/=]+)|((mailto:)?[_.\w-]+@([\w][\w\-]+\.)+[a-zA-Z]{2,3})/g;"undefined"!=typeof module&&module.exports?module.exports=s:e.truncate=s})(String);