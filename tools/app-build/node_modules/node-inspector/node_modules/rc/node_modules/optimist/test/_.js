function testCmd(e,t){return function(n){var r=setTimeout(function(){assert.fail("Never got stdout data.")},5e3),i=process.cwd();process.chdir(__dirname+"/_");var s=e.split(" "),o=spawn(s[0],s.slice(1).concat(t.map(String)));process.chdir(i),o.stderr.on("data",function(e){n.error(e),n.end()}),o.stdout.on("data",function(e){clearTimeout(r);var i=JSON.parse(e.toString());n.same(i.map(String),t.map(String)),n.end()})}}var spawn=require("child_process").spawn,test=require("tap").test;test("dotSlashEmpty",testCmd("./bin.js",[])),test("dotSlashArgs",testCmd("./bin.js",["a","b","c"])),test("nodeEmpty",testCmd("node bin.js",[])),test("nodeArgs",testCmd("node bin.js",["x","y","z"])),test("whichNodeEmpty",function(e){var t=spawn("which",["node"]);t.stdout.on("data",function(t){e.test(testCmd(t.toString().trim()+" bin.js",[])),e.end()}),t.stderr.on("data",function(t){assert.error(t),e.end()})}),test("whichNodeArgs",function(e){var t=spawn("which",["node"]);t.stdout.on("data",function(t){e.test(testCmd(t.toString().trim()+" bin.js",["q","r"])),e.end()}),t.stderr.on("data",function(t){e.error(t),e.end()})});