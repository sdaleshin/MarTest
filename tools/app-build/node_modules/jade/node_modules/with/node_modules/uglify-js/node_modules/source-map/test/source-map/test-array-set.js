/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */

define(["require","exports","module","../../lib/source-map/array-set"],function(e,t,n){function i(){var e=new r;for(var t=0;t<100;t++)e.add(String(t));return e}var r=e("../../lib/source-map/array-set").ArraySet;t["test .has() membership"]=function(e,t){var n=i();for(var r=0;r<100;r++)e.ok(n.has(String(r)))},t["test .indexOf() elements"]=function(e,t){var n=i();for(var r=0;r<100;r++)e.strictEqual(n.indexOf(String(r)),r)},t["test .at() indexing"]=function(e,t){var n=i();for(var r=0;r<100;r++)e.strictEqual(n.at(r),String(r))},t["test creating from an array"]=function(e,t){var n=r.fromArray(["foo","bar","baz","quux","hasOwnProperty"]);e.ok(n.has("foo")),e.ok(n.has("bar")),e.ok(n.has("baz")),e.ok(n.has("quux")),e.ok(n.has("hasOwnProperty")),e.strictEqual(n.indexOf("foo"),0),e.strictEqual(n.indexOf("bar"),1),e.strictEqual(n.indexOf("baz"),2),e.strictEqual(n.indexOf("quux"),3),e.strictEqual(n.at(0),"foo"),e.strictEqual(n.at(1),"bar"),e.strictEqual(n.at(2),"baz"),e.strictEqual(n.at(3),"quux")},t["test that you can add __proto__; see github issue #30"]=function(e,t){var n=new r;n.add("__proto__"),e.ok(n.has("__proto__")),e.strictEqual(n.at(0),"__proto__"),e.strictEqual(n.indexOf("__proto__"),0)},t["test .fromArray() with duplicates"]=function(e,t){var n=r.fromArray(["foo","foo"]);e.ok(n.has("foo")),e.strictEqual(n.at(0),"foo"),e.strictEqual(n.indexOf("foo"),0),e.strictEqual(n.toArray().length,1),n=r.fromArray(["foo","foo"],!0),e.ok(n.has("foo")),e.strictEqual(n.at(0),"foo"),e.strictEqual(n.at(1),"foo"),e.strictEqual(n.indexOf("foo"),0),e.strictEqual(n.toArray().length,2)},t["test .add() with duplicates"]=function(e,t){var n=new r;n.add("foo"),n.add("foo"),e.ok(n.has("foo")),e.strictEqual(n.at(0),"foo"),e.strictEqual(n.indexOf("foo"),0),e.strictEqual(n.toArray().length,1),n.add("foo",!0),e.ok(n.has("foo")),e.strictEqual(n.at(0),"foo"),e.strictEqual(n.at(1),"foo"),e.strictEqual(n.indexOf("foo"),0),e.strictEqual(n.toArray().length,2)}});