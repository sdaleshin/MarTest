function load_global(e){e=path.resolve(path.dirname(module.filename),e);try{var t=fs.readFileSync(e,"utf8");return vm.runInContext(t,UglifyJS,e)}catch(n){sys.debug("ERROR in file: "+e+" / "+n),process.exit(1)}}var path=require("path"),fs=require("fs"),vm=require("vm"),sys=require("util"),UglifyJS=vm.createContext({sys:sys,console:console,MOZ_SourceMap:require("source-map")}),FILES=exports.FILES=["../lib/utils.js","../lib/ast.js","../lib/parse.js","../lib/transform.js","../lib/scope.js","../lib/output.js","../lib/compress.js","../lib/sourcemap.js","../lib/mozilla-ast.js"].map(function(e){return path.join(path.dirname(fs.realpathSync(__filename)),e)});FILES.forEach(load_global),UglifyJS.AST_Node.warn_function=function(e){sys.error("WARN: "+e)};for(var i in UglifyJS)UglifyJS.hasOwnProperty(i)&&(exports[i]=UglifyJS[i]);exports.minify=function(e,t){t=UglifyJS.defaults(t,{outSourceMap:null,sourceRoot:null,inSourceMap:null,fromString:!1,warnings:!1,mangle:{},output:null,compress:{}}),typeof e=="string"&&(e=[e]),UglifyJS.base54.reset();var n=null;e.forEach(function(e){var r=t.fromString?e:fs.readFileSync(e,"utf8");n=UglifyJS.parse(r,{filename:t.fromString?"?":e,toplevel:n})});if(t.compress){var r={warnings:t.warnings};UglifyJS.merge(r,t.compress),n.figure_out_scope();var i=UglifyJS.Compressor(r);n=n.transform(i)}t.mangle&&(n.figure_out_scope(),n.compute_char_frequency(),n.mangle_names(t.mangle));var s=t.inSourceMap,o={};typeof t.inSourceMap=="string"&&(s=fs.readFileSync(t.inSourceMap,"utf8")),t.outSourceMap&&(o.source_map=UglifyJS.SourceMap({file:t.outSourceMap,orig:s,root:t.sourceRoot})),t.output&&UglifyJS.merge(o,t.output);var u=UglifyJS.OutputStream(o);return n.print(u),{code:u+"",map:o.source_map+""}},exports.describe_ast=function(){function t(n){e.print("AST_"+n.TYPE);var r=n.SELF_PROPS.filter(function(e){return!/^\$/.test(e)});r.length>0&&(e.space(),e.with_parens(function(){r.forEach(function(t,n){n&&e.space(),e.print(t)})})),n.documentation&&(e.space(),e.print_string(n.documentation)),n.SUBCLASSES.length>0&&(e.space(),e.with_block(function(){n.SUBCLASSES.forEach(function(n,r){e.indent(),t(n),e.newline()})}))}var e=UglifyJS.OutputStream({beautify:!0});return t(UglifyJS.AST_Node),e+""};