/*
 * Copyright 2011 Mozilla Foundation and contributors
 * Licensed under the New BSD license. See LICENSE or:
 * http://opensource.org/licenses/BSD-3-Clause
 */

define(["require","exports","module","../../lib/source-map/util"],function(e,t,n){function i(e,t,n,i,s,o,u,a,f,l){if(!l){var c=u.originalPositionFor({line:e,column:t});a.equal(c.name,o,"Incorrect name, expected "+JSON.stringify(o)+", got "+JSON.stringify(c.name)),a.equal(c.line,i,"Incorrect line, expected "+JSON.stringify(i)+", got "+JSON.stringify(c.line)),a.equal(c.column,s,"Incorrect column, expected "+JSON.stringify(s)+", got "+JSON.stringify(c.column));var h;n&&u.sourceRoot&&n.indexOf(u.sourceRoot)===0?h=n:n?h=u.sourceRoot?r.join(u.sourceRoot,n):n:h=null,a.equal(c.source,h,"Incorrect source, expected "+JSON.stringify(h)+", got "+JSON.stringify(c.source))}if(!f){var p=u.generatedPositionFor({source:n,line:i,column:s});a.equal(p.line,e,"Incorrect line, expected "+JSON.stringify(e)+", got "+JSON.stringify(p.line)),a.equal(p.column,t,"Incorrect column, expected "+JSON.stringify(t)+", got "+JSON.stringify(p.column))}}function s(e,t,n){e.equal(t.version,n.version,"version mismatch"),e.equal(t.file,n.file,"file mismatch"),e.equal(t.names.length,n.names.length,"names length mismatch: "+t.names.join(", ")+" != "+n.names.join(", "));for(var r=0;r<t.names.length;r++)e.equal(t.names[r],n.names[r],"names["+r+"] mismatch: "+t.names.join(", ")+" != "+n.names.join(", "));e.equal(t.sources.length,n.sources.length,"sources length mismatch: "+t.sources.join(", ")+" != "+n.sources.join(", "));for(var r=0;r<t.sources.length;r++)e.equal(t.sources[r],n.sources[r],"sources["+r+"] length mismatch: "+t.sources.join(", ")+" != "+n.sources.join(", "));e.equal(t.sourceRoot,n.sourceRoot,"sourceRoot mismatch: "+t.sourceRoot+" != "+n.sourceRoot),e.equal(t.mappings,n.mappings,"mappings mismatch:\nActual:   "+t.mappings+"\nExpected: "+n.mappings);if(t.sourcesContent){e.equal(t.sourcesContent.length,n.sourcesContent.length,"sourcesContent length mismatch");for(var r=0;r<t.sourcesContent.length;r++)e.equal(t.sourcesContent[r],n.sourcesContent[r],"sourcesContent["+r+"] mismatch")}}var r=e("../../lib/source-map/util");t.testGeneratedCode=" ONE.foo=function(a){return baz(a);};\n TWO.inc=function(a){return a+1;};",t.testMap={version:3,file:"min.js",names:["bar","baz","n"],sources:["one.js","two.js"],sourceRoot:"/the/root",mappings:"CAAC,IAAI,IAAM,SAAUA,GAClB,OAAOC,IAAID;CCDb,IAAI,IAAM,SAAUE,GAClB,OAAOA"},t.testMapWithSourcesContent={version:3,file:"min.js",names:["bar","baz","n"],sources:["one.js","two.js"],sourcesContent:[" ONE.foo = function (bar) {\n   return baz(bar);\n };"," TWO.inc = function (n) {\n   return n + 1;\n };"],sourceRoot:"/the/root",mappings:"CAAC,IAAI,IAAM,SAAUA,GAClB,OAAOC,IAAID;CCDb,IAAI,IAAM,SAAUE,GAClB,OAAOA"},t.emptyMap={version:3,file:"min.js",names:[],sources:[],mappings:""},t.assertMapping=i,t.assertEqualMaps=s});