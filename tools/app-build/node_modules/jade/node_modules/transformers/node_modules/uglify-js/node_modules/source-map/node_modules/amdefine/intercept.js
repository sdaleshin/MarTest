function stripBOM(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}function intercept(e,t){var n=stripBOM(fs.readFileSync(t,"utf8"));amdefineRegExp.test(e.id)||(n=inserted+n),e._compile(n,t)}var inserted,Module=require("module"),fs=require("fs"),existingExtFn=Module._extensions[".js"],amdefineRegExp=/amdefine\.js/;inserted="",intercept._id="amdefine/intercept";if(!existingExtFn._id||existingExtFn._id!==intercept._id)Module._extensions[".js"]=intercept;