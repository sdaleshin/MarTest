function Compiler(e){e=e||{},this.compress=e.compress,this.indentation=e.indent}module.exports=function(e,t){return(new Compiler(t)).compile(e)},Compiler.prototype.compile=function(e){return e.stylesheet.rules.map(this.visit,this).join(this.compress?"":"\n\n")},Compiler.prototype.visit=function(e){return e.charset?this.charset(e):e.keyframes?this.keyframes(e):e.media?this.media(e):e.import?this.import(e):this.rule(e)},Compiler.prototype.import=function(e){return"@import "+e.import+";"},Compiler.prototype.media=function(e){return this.compress?"@media "+e.media+"{"+e.rules.map(this.visit,this).join("")+"}":"@media "+e.media+" {\n"+this.indent(1)+e.rules.map(this.visit,this).join("\n\n")+this.indent(-1)+"\n}"},Compiler.prototype.charset=function(e){return this.compress?"@charset "+e.charset+";":"@charset "+e.charset+";\n"},Compiler.prototype.keyframes=function(e){return this.compress?"@"+(e.vendor||"")+"keyframes "+e.name+"{"+e.keyframes.map(this.keyframe,this).join("")+"}":"@"+(e.vendor||"")+"keyframes "+e.name+" {\n"+this.indent(1)+e.keyframes.map(this.keyframe,this).join("\n")+this.indent(-1)+"}"},Compiler.prototype.keyframe=function(e){return this.compress?e.values.join(",")+"{"+e.declarations.map(this.declaration,this).join(";")+"}":this.indent()+e.values.join(", ")+" {\n"+this.indent(1)+e.declarations.map(this.declaration,this).join(";\n")+this.indent(-1)+"\n"+this.indent()+"}\n"},Compiler.prototype.rule=function(e){var t=this.indent();return this.compress?e.selectors.join(",")+"{"+e.declarations.map(this.declaration,this).join(";")+"}":e.selectors.map(function(e){return t+e}).join(",\n")+" {\n"+this.indent(1)+e.declarations.map(this.declaration,this).join(";\n")+this.indent(-1)+"\n"+this.indent()+"}"},Compiler.prototype.declaration=function(e){return this.compress?e.property+":"+e.value:this.indent()+e.property+": "+e.value},Compiler.prototype.indent=function(e){return this.level=this.level||1,null!=e?(this.level+=e,""):Array(this.level).join(this.indentation||"  ")};