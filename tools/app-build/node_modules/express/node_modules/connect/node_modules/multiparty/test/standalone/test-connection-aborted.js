var assert=require("assert"),http=require("http"),net=require("net"),multiparty=require("../../"),server=http.createServer(function(e,t){var n=new multiparty.Form,r=!1;n.on("aborted",function(){r=!0}),n.on("error",function(){assert(r,"Error event should follow aborted"),server.close()}),n.on("end",function(){throw new Error('Unexpected "end" event')}),n.parse(e)}).listen(0,"localhost",function(){var e=net.connect(server.address().port);e.write("POST / HTTP/1.1\r\nContent-Length: 70\r\nContent-Type: multipart/form-data; boundary=foo\r\n\r\n"),e.end()});