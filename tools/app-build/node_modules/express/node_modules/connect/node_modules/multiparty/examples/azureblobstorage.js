var http=require("http"),util=require("util"),multiparty=require("../"),azure=require("azure"),PORT=process.env.PORT||27372,server=http.createServer(function(e,t){if(e.url==="/")t.writeHead(200,{"content-type":"text/html"}),t.end('<form action="/upload" enctype="multipart/form-data" method="post"><input type="text" name="title"><br><input type="file" name="upload"><br><input type="submit" value="Upload"></form>');else if(e.url==="/upload"){var n=azure.createBlobService(),r=new multiparty.Form;r.on("part",function(e){if(!e.filename)return;var t=e.byteCount-e.byteOffset,r=e.filename,i="blobContainerName";n.createBlockBlobFromStream(i,r,e,t,function(e){e})}),r.parse(e),t.send("File uploaded successfully")}});server.listen(PORT,function(){console.info("listening on http://0.0.0.0:"+PORT+"/")});