function parseAcceptEncoding(e){var t;return e?t=e.split(",").map(function(e){return parseEncoding(e.trim())}):t=[],t.some(function(e){return e&&e.encoding==="identity"})||t.push({encoding:"identity",q:.1}),t.filter(function(e){return e&&e.q>0})}function parseEncoding(e){var t=e.match(/^\s*(\S+?)\s*(?:;(.*))?$/);if(!t)return null;var n=t[1],r=1;if(t[2]){var i=t[2].split(";");for(var s=0;s<i.length;s++){var o=i[s].trim().split("=");if(o[0]==="q"){r=parseFloat(o[1]);break}}}return{encoding:n,q:r}}function getEncodingPriority(e,t){return(t.filter(function(t){return specify(e,t)}).sort(function(e,t){return e.q===t.q?0:e.q>t.q?-1:1})[0]||{q:0}).q}function specify(e,t){if(t.encoding==="*"||t.encoding===e)return t}function preferredEncodings(e,t){return e=parseAcceptEncoding(e||""),t?t.map(function(t){return[t,getEncodingPriority(t,e)]}).filter(function(e){return e[1]>0}).sort(function(e,t){return e[1]===t[1]?0:e[1]>t[1]?-1:1}).map(function(e){return e[0]}):e.sort(function(e,t){return e.q<t.q?1:-1}).map(function(e){return e.encoding})}module.exports=preferredEncodings,preferredEncodings.preferredEncodings=preferredEncodings;