(function(){var e,t,n,r;e=require("../lib/negotiator").Negotiator,n=require("http"),t=require("gzip-buffer"),r={identity:"Hello World"},t.gzip(r.identity,function(t){var i,s,o,u;return r.gzip=t,i=function(){var e;e=[];for(s in r)u=r[s],e.push(s);return e}(),console.log(i),o=n.createServer(function(t,n){var s,o;return o=new e(t),console.log("Accept-Encoding: "+t.headers["accept-encoding"]),console.log("Preferred: "+o.preferredEncodings()),console.log("Possible: "+o.preferredEncodings(i)),s=o.preferredEncoding(i),console.log("Selected: "+s),s?(n.writeHead(200,{"Content-Encoding":s}),n.end(r[s])):(n.writeHead(406),n.end())}),o.listen(8080)})}).call(this);