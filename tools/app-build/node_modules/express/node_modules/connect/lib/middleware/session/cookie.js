/*!
 * Connect - session - Cookie
 * Copyright(c) 2010 Sencha Inc.
 * Copyright(c) 2011 TJ Holowaychuk
 * MIT Licensed
 */

/*!
 * Prototype.
 */

var utils=require("../../utils"),cookie=require("cookie"),Cookie=module.exports=function(t){this.path="/",this.maxAge=null,this.httpOnly=!0,t&&utils.merge(this,t),this.originalMaxAge=undefined==this.originalMaxAge?this.maxAge:this.originalMaxAge};Cookie.prototype={set expires(e){this._expires=e,this.originalMaxAge=this.maxAge},get expires(){return this._expires},set maxAge(e){this.expires="number"==typeof e?new Date(Date.now()+e):e},get maxAge(){return this.expires instanceof Date?this.expires.valueOf()-Date.now():this.expires},get data(){return{originalMaxAge:this.originalMaxAge,expires:this._expires,secure:this.secure,httpOnly:this.httpOnly,domain:this.domain,path:this.path}},serialize:function(e,t){return cookie.serialize(e,t,this.data)},toJSON:function(){return this.data}};