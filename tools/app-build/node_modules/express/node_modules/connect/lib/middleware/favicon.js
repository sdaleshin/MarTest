/*!
 * Connect - favicon
 * Copyright(c) 2010 Sencha Inc.
 * Copyright(c) 2011 TJ Holowaychuk
 * MIT Licensed
 */

var fs=require("fs"),utils=require("../utils");module.exports=function(t,n){var n=n||{},t=t||__dirname+"/../public/favicon.ico",r=n.maxAge||864e5,i;return function(n,s,o){"/favicon.ico"==n.url?i?(s.writeHead(200,i.headers),s.end(i.body)):fs.readFile(t,function(e,t){if(e)return o(e);i={headers:{"Content-Type":"image/x-icon","Content-Length":t.length,ETag:'"'+utils.md5(t)+'"',"Cache-Control":"public, max-age="+r/1e3},body:t},s.writeHead(200,i.headers),s.end(i.body)}):o()}};