function Grid(e,t){if(!(this instanceof Grid))return new Grid(e,t);this.db=e,this.fsName=t==null?GridStore.DEFAULT_ROOT_COLLECTION:t}var GridStore=require("./gridstore").GridStore,ObjectID=require("bson").ObjectID;Grid.prototype.put=function(e,t,n){var r=this,i=Array.prototype.slice.call(arguments,1);n=i.pop(),t=i.length?i.shift():{},t.root=t["root"]==null?this.fsName:t.root;if(!Buffer.isBuffer(e))return n(new Error("Data object must be a buffer object"),null);var s=t.filename||null,o=t._id||null,u=new GridStore(this.db,o,s,"w",t);u.open(function(t,r){if(t)return n(t,null);r.write(e,function(e,t){if(e)return n(e,null);r.close(function(e,t){if(e)return n(e,null);n(null,t)})})})},Grid.prototype.get=function(e,t){var n=new GridStore(this.db,e,null,"r",{root:this.fsName});n.open(function(e,n){if(e)return t(e,null);n.read(function(e,n){return t(e,n)})})},Grid.prototype.delete=function(e,t){GridStore.unlink(this.db,e,{root:this.fsName},function(e,n){return e?t(e,!1):t(null,!0)})},exports.Grid=Grid;