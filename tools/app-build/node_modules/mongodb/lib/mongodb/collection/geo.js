var shared=require("./shared"),utils=require("../utils"),geoNear=function(t,n,r,i){var s=Array.prototype.slice.call(arguments,2);i=s.pop(),r=s.length?s.shift()||{}:{};var o={geoNear:this.collectionName,near:[t,n]};r["num"]!=null&&(o.num=r.num),r["maxDistance"]!=null&&(o.maxDistance=r.maxDistance),r["distanceMultiplier"]!=null&&(o.distanceMultiplier=r.distanceMultiplier),r["query"]!=null&&(o.query=r.query),r["spherical"]!=null&&(o.spherical=r.spherical),r["uniqueDocs"]!=null&&(o.uniqueDocs=r.uniqueDocs),r["includeLocs"]!=null&&(o.includeLocs=r.includeLocs),r.readPreference=shared._getReadConcern(this,r),this.db.command(o,r,function(e,t){e?i(e):t.err||t.errmsg?i(utils.toError(t)):i(null,t)})},geoHaystackSearch=function(t,n,r,i){var s=Array.prototype.slice.call(arguments,2);i=s.pop(),r=s.length?s.shift()||{}:{};var o={geoSearch:this.collectionName,near:[t,n]};r["maxDistance"]!=null&&(o.maxDistance=r.maxDistance),r["query"]!=null&&(o.search=r.query),r["search"]!=null&&(o.search=r.search),r["limit"]!=null&&(o.limit=r.limit),r.readPreference=shared._getReadConcern(this,r),this.db.command(o,r,function(e,t){e?i(e):t.err||t.errmsg?i(utils.toError(t)):i(null,t)})};exports.geoNear=geoNear,exports.geoHaystackSearch=geoHaystackSearch;