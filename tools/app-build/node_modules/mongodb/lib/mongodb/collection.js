function Collection(e,t,n,r){if(!(this instanceof Collection))return new Collection(e,t,n,r);shared.checkCollectionName(t),this.db=e,this.collectionName=t,this.internalHint=null,this.opts=r!=null&&"object"==typeof r?r:{},this.slaveOk=r==null||r.slaveOk==null?e.slaveOk:r.slaveOk,this.serializeFunctions=r==null||r.serializeFunctions==null?e.serializeFunctions:r.serializeFunctions,this.raw=r==null||r.raw==null?e.raw:r.raw,this.readPreference=r==null||r.readPreference==null?e.serverConfig.options.readPreference:r.readPreference,this.readPreference=this.readPreference==null?"primary":this.readPreference,this.pkFactory=n==null?ObjectID:n,this.serverCapabilities=this.db.serverConfig._serverCapabilities}var InsertCommand=require("./commands/insert_command").InsertCommand,QueryCommand=require("./commands/query_command").QueryCommand,DeleteCommand=require("./commands/delete_command").DeleteCommand,UpdateCommand=require("./commands/update_command").UpdateCommand,DbCommand=require("./commands/db_command").DbCommand,ObjectID=require("bson").ObjectID,Code=require("bson").Code,Cursor=require("./cursor").Cursor,utils=require("./utils"),shared=require("./collection/shared"),core=require("./collection/core"),query=require("./collection/query"),index=require("./collection/index"),geo=require("./collection/geo"),commands=require("./collection/commands"),aggregation=require("./collection/aggregation");Collection.prototype.insert=function(){return core.insert}(),Collection.prototype.remove=function(){return core.remove}(),Collection.prototype.rename=function(){return commands.rename}(),Collection.prototype.save=function(){return core.save}(),Collection.prototype.update=function(){return core.update}(),Collection.prototype.distinct=function(){return commands.distinct}(),Collection.prototype.count=function(){return commands.count}(),Collection.prototype.drop=function(t){this.db.dropCollection(this.collectionName,t)},Collection.prototype.findAndModify=function(){return core.findAndModify}(),Collection.prototype.findAndRemove=function(){return core.findAndRemove}(),Collection.prototype.find=function(){return query.find}(),Collection.prototype.findOne=function(){return query.findOne}(),Collection.prototype.createIndex=function(){return index.createIndex}(),Collection.prototype.ensureIndex=function(){return index.ensureIndex}(),Collection.prototype.indexInformation=function(){return index.indexInformation}(),Collection.prototype.dropIndex=function(t,n){this.db.dropIndex(this.collectionName,t,n)},Collection.prototype.dropAllIndexes=function(){return index.dropAllIndexes}(),Collection.prototype.dropIndexes=function(){return Collection.prototype.dropAllIndexes}(),Collection.prototype.reIndex=function(e){this.db.reIndex(this.collectionName,e)},Collection.prototype.mapReduce=function(){return aggregation.mapReduce}(),Collection.prototype.group=function(){return aggregation.group}(),Collection.prototype.options=function(){return commands.options}(),Collection.prototype.isCapped=function(){return commands.isCapped}(),Collection.prototype.indexExists=function(){return index.indexExists}(),Collection.prototype.geoNear=function(){return geo.geoNear}(),Collection.prototype.geoHaystackSearch=function(){return geo.geoHaystackSearch}(),Collection.prototype.indexes=function(t){this.db.indexInformation(this.collectionName,{full:!0},t)},Collection.prototype.aggregate=function(){return aggregation.aggregate}(),Collection.prototype.stats=function(){return commands.stats}(),Object.defineProperty(Collection.prototype,"hint",{enumerable:!0,get:function(){return this.internalHint},set:function(e){this.internalHint=shared.normalizeHintField(e)}}),exports.Collection=Collection;