function jadeify(e,t){t||(t={}),t.package=package,t.hl=hl,t.linktype=linktype,t.href=href,t.klass=klass,jade.renderFile(e,t,function(t,n){if(t)return console.error(t.stack);var r=e.replace(".jade",".html");fs.writeFile(r,n,function(e){if(e)return console.error("could not write",e.stack);console.log("%s : rendered ",new Date,r)})})}function getVersion(){var e=fs.readFileSync("./History.md","utf8").replace(/\r/g,"\n").split("\n");for(var t=0;t<e.length;++t){var n=(e[t]||"").trim();if(!n)continue;var r=/^\s*([^\s]+)\s/.exec(n);if(r&&r[1])return r[1]}throw new Error("no match found")}function getUnstable(e){e=e.replace("-pre");var t=e.split(".");return t=t.map(function(e){return parseInt(e)}),t[1]++,t[2]="x",t.join(".")}var fs=require("fs"),jade=require("jade"),package=require("./package"),hl=require("./docs/helpers/highlight"),linktype=require("./docs/helpers/linktype"),href=require("./docs/helpers/href"),klass=require("./docs/helpers/klass");require("./docs/helpers/filters")(jade),package.version=getVersion(),package.unstable=getUnstable(package.version);var filemap=require("./docs/source"),files=Object.keys(filemap);files.forEach(function(e){var t=__dirname+"/"+e;jadeify(t,filemap[e]),"--watch"==process.argv[2]&&fs.watchFile(t,{interval:1e3},function(n,r){n.mtime>r.mtime&&jadeify(t,filemap[e])})});