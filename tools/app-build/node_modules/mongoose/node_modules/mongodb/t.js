var mongodb=require("./lib/mongodb"),mongoserver=new mongodb.Server("localhost",27017,{}),db_conn=new mongodb.Db("test1",mongoserver,{w:1});db_conn.on("open",function(){console.log("this is an open event")}),db_conn.on("close",function(){console.log("this is a close event")}),db_conn.on("reconnect",function(){console.log("this is a reconnect event")}),db_conn.open(function(e){if(e)throw e;var t=db_conn.collection("test"),n=0;setInterval(function(){t.findOne(function(e,t){if(e)return console.log("mongodb query not ok %d",n);console.log("mongodb query ok %d",n),n++}),n==40&&db_conn.close()},1e3),console.log("hi")});