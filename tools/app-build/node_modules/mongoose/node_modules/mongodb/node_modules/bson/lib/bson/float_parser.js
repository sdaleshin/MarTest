// Copyright (c) 2008, Fair Oaks Labs, Inc.
// All rights reserved.
// 
// Redistribution and use in source and binary forms, with or without
// modification, are permitted provided that the following conditions are met:
// 
//  * Redistributions of source code must retain the above copyright notice,
//    this list of conditions and the following disclaimer.
// 
//  * Redistributions in binary form must reproduce the above copyright notice,
//    this list of conditions and the following disclaimer in the documentation
//    and/or other materials provided with the distribution.
// 
//  * Neither the name of Fair Oaks Labs, Inc. nor the names of its contributors
//    may be used to endorse or promote products derived from this software
//    without specific prior written permission.
// 
// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
// ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE
// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
// POSSIBILITY OF SUCH DAMAGE.
//
//
// Modifications to writeIEEE754 to support negative zeroes made by Brian White

var readIEEE754=function(e,t,n,r,i){var s,o,u=n==="big",a=i*8-r-1,f=(1<<a)-1,l=f>>1,c=-7,h=u?0:i-1,p=u?1:-1,d=e[t+h];h+=p,s=d&(1<<-c)-1,d>>=-c,c+=a;for(;c>0;s=s*256+e[t+h],h+=p,c-=8);o=s&(1<<-c)-1,s>>=-c,c+=r;for(;c>0;o=o*256+e[t+h],h+=p,c-=8);if(s===0)s=1-l;else{if(s===f)return o?NaN:(d?-1:1)*Infinity;o+=Math.pow(2,r),s-=l}return(d?-1:1)*o*Math.pow(2,s-r)},writeIEEE754=function(e,t,n,r,i,s){var o,u,a,f=r==="big",l=s*8-i-1,c=(1<<l)-1,h=c>>1,p=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,d=f?s-1:0,v=f?-1:1,m=t<0||t===0&&1/t<0?1:0;t=Math.abs(t),isNaN(t)||t===Infinity?(u=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-o))<1&&(o--,a*=2),o+h>=1?t+=p/a:t+=p*Math.pow(2,1-h),t*a>=2&&(o++,a/=2),o+h>=c?(u=0,o=c):o+h>=1?(u=(t*a-1)*Math.pow(2,i),o+=h):(u=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));for(;i>=8;e[n+d]=u&255,d+=v,u/=256,i-=8);o=o<<i|u,l+=i;for(;l>0;e[n+d]=o&255,d+=v,o/=256,l-=8);e[n+d-v]|=m*128};exports.readIEEE754=readIEEE754,exports.writeIEEE754=writeIEEE754;