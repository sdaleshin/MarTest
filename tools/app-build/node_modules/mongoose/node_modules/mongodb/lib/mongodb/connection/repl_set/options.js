var PingStrategy=require("./strategies/ping_strategy").PingStrategy,StatisticsStrategy=require("./strategies/statistics_strategy").StatisticsStrategy,ReadPreference=require("../read_preference").ReadPreference,Options=function(e){e=e||{},this._options=e,this.ha=e.ha||!0,this.haInterval=e.haInterval||2e3,this.reconnectWait=e.reconnectWait||1e3,this.retries=e.retries||30,this.rs_name=e.rs_name,this.socketOptions=e.socketOptions||{},this.readPreference=e.readPreference,this.readSecondary=e.read_secondary,this.poolSize=e.poolSize==null?5:e.poolSize,this.strategy=e.strategy||"ping",this.secondaryAcceptableLatencyMS=e.secondaryAcceptableLatencyMS||15,this.connectArbiter=e.connectArbiter||!1,this.connectWithNoPrimary=e.connectWithNoPrimary||!1,this.logger=e.logger,this.ssl=e.ssl||!1,this.sslValidate=e.sslValidate||!1,this.sslCA=e.sslCA,this.sslCert=e.sslCert,this.sslKey=e.sslKey,this.sslPass=e.sslPass,this.emitOpen=e.emitOpen||!0};Options.prototype.init=function(){if(this.sslValidate&&(!Array.isArray(this.sslCA)||this.sslCA.length==0))throw new Error("The driver expects an Array of CA certificates in the sslCA parameter when enabling sslValidate");if(this.strategy!=null&&this.strategy!="ping"&&this.strategy!="statistical"&&this.strategy!="none")throw new Error("Only ping or statistical strategies allowed");this.strategy==null&&(this.strategy="ping"),this.strategyInstance&&(this.strategyInstance.logger=this.logger);var e=this.readPreference;if(e!=null){if(e!=ReadPreference.PRIMARY&&e!=ReadPreference.PRIMARY_PREFERRED&&e!=ReadPreference.SECONDARY&&e!=ReadPreference.SECONDARY_PREFERRED&&e!=ReadPreference.NEAREST&&typeof e!="object"&&e["_type"]!="ReadPreference")throw new Error("Illegal readPreference mode specified, "+e);this.readPreference=e}else this.readPreference=null;this.readSecondary!=null&&(this.readSecondary=this.readPreference==ReadPreference.PRIMARY||this.readPreference==0||this.readPreference==null?!1:!0),this.readSecondary&&(this.slaveOk=!0),this.logger=this.logger!=null&&typeof this.logger.debug=="function"&&typeof this.logger.error=="function"&&typeof this.logger.debug=="function"?this.logger:{error:function(e,t){},log:function(e,t){},debug:function(e,t){}},this.connectTimeoutMS=this.socketOptions.connectTimeoutMS?this.socketOptions.connectTimeoutMS:1e3,this.socketTimeoutMS=this.socketOptions.socketTimeoutMS?this.socketOptions.socketTimeoutMS:3e4},Options.prototype.decorateAndClean=function(e,t){var n=this,r={};for(var i=0;i<e.length;i++){var s=e[i];r[s.host+":"+s.port]==null&&(r[s.host+":"+s.port]=s)}var o=[];for(var u in r)o.push(r[u]);return o.forEach(function(e){e.options.auto_reconnect=!1,e.ssl=n.ssl,e.sslValidate=n.sslValidate,e.sslCA=n.sslCA,e.sslCert=n.sslCert,e.sslKey=n.sslKey,e.sslPass=n.sslPass,e.poolSize=n.poolSize,e._callBackStore=t}),o},exports.Options=Options;