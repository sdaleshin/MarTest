function createData(){Console.create({name:"Nintendo 64",manufacturer:"Nintendo",released:"September 29, 1996"},function(e,t){if(e)return done(e);Game.create({name:"Legend of Zelda: Ocarina of Time",developer:"Nintendo",released:new Date("November 21, 1998"),consoles:[t]},function(e){if(e)return done(e);example()})})}function example(){Game.findOne({name:/^Legend of Zelda/}).exec(function(e,t){if(e)return done(e);console.log('"%s" console _id: %s',t.name,t.consoles[0]),t.populate("consoles",function(e){if(e)return done(e);console.log('"%s" was released for the %s on %s',t.name,t.consoles[0].name,t.released.toLocaleDateString()),done()})})}function done(e){e&&console.error(e),Console.remove(function(){Game.remove(function(){mongoose.disconnect()})})}var mongoose=require("../../lib"),Schema=mongoose.Schema;console.log("Running mongoose version %s",mongoose.version);var consoleSchema=Schema({name:String,manufacturer:String,released:Date}),Console=mongoose.model("Console",consoleSchema),gameSchema=Schema({name:String,developer:String,released:Date,consoles:[{type:Schema.Types.ObjectId,ref:"Console"}]}),Game=mongoose.model("Game",gameSchema);mongoose.connect("mongodb://localhost/console",function(e){if(e)throw e;createData()});