function createData(){Console.create({name:"Nintendo 64",manufacturer:"Nintendo",released:"September 29, 1996"},{name:"Super Nintendo",manufacturer:"Nintendo",released:"August 23, 1991"},function(e,t,n){if(e)return done(e);Game.create({name:"Legend of Zelda: Ocarina of Time",developer:"Nintendo",released:new Date("November 21, 1998"),consoles:[t]},{name:"Mario Kart",developer:"Nintendo",released:"September 1, 1992",consoles:[n]},function(e){if(e)return done(e);example()})})}function example(){Game.find({}).exec(function(e,t){if(e)return done(e);console.log("found %d games",t.length);var n={path:"consoles",select:"name released -_id"};Game.populate(t,n,function(e,t){if(e)return done(e);t.forEach(function(e){console.log('"%s" was released for the %s on %s',e.name,e.consoles[0].name,e.released.toLocaleDateString())}),done()})})}function done(e){e&&console.error(e),Console.remove(function(){Game.remove(function(){mongoose.disconnect()})})}var mongoose=require("../../lib"),Schema=mongoose.Schema;console.log("Running mongoose version %s",mongoose.version);var consoleSchema=Schema({name:String,manufacturer:String,released:Date}),Console=mongoose.model("Console",consoleSchema),gameSchema=Schema({name:String,developer:String,released:Date,consoles:[{type:Schema.Types.ObjectId,ref:"Console"}]}),Game=mongoose.model("Game",gameSchema);mongoose.connect("mongodb://localhost/console",function(e){if(e)throw e;createData()});