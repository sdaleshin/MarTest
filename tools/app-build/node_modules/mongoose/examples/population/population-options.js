function createData(){Console.create({name:"Nintendo 64",manufacturer:"Nintendo",released:"September 29, 1996"},{name:"Super Nintendo",manufacturer:"Nintendo",released:"August 23, 1991"},{name:"XBOX 360",manufacturer:"Microsoft",released:"November 22, 2005"},function(e,t,n,r){if(e)return done(e);Game.create({name:"Legend of Zelda: Ocarina of Time",developer:"Nintendo",released:new Date("November 21, 1998"),consoles:[t]},{name:"Mario Kart",developer:"Nintendo",released:"September 1, 1992",consoles:[n]},{name:"Perfect Dark Zero",developer:"Rare",released:"November 17, 2005",consoles:[r]},function(e){if(e)return done(e);example()})})}function example(){Game.find({}).populate({path:"consoles",match:{manufacturer:"Nintendo"},select:"name",options:{comment:"population"}}).exec(function(e,t){return e?done(e):(t.forEach(function(e){console.log('"%s" was released for the %s on %s',e.name,e.consoles.length?e.consoles[0].name:"??",e.released.toLocaleDateString())}),done())})}function done(e){e&&console.error(e),Console.remove(function(){Game.remove(function(){mongoose.disconnect()})})}var mongoose=require("../../lib"),Schema=mongoose.Schema;console.log("Running mongoose version %s",mongoose.version);var consoleSchema=Schema({name:String,manufacturer:String,released:Date}),Console=mongoose.model("Console",consoleSchema),gameSchema=Schema({name:String,developer:String,released:Date,consoles:[{type:Schema.Types.ObjectId,ref:"Console"}]}),Game=mongoose.model("Game",gameSchema);mongoose.connect("mongodb://localhost/console",function(e){if(e)throw e;createData()});