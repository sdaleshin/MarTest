var mongoose=require("../../lib"),Schema=mongoose.Schema;module.exports=function(){var e=new Schema({name:String,age:Number,birthday:Date,gender:String,likes:[String],loc:{type:[Number],index:"2d"}});e.methods.findClosest=function(e){return this.model("Person").find({loc:{$nearSphere:this.loc},name:{$ne:this.name}}).limit(1).exec(e)},mongoose.model("Person",e)};