function SessionStrategy(){Strategy.call(this),this.name="session"}var pause=require("pause"),util=require("util"),Strategy=require("../strategy");util.inherits(SessionStrategy,Strategy),SessionStrategy.prototype.authenticate=function(e,t){if(!e._passport)return this.error(new Error("passport.initialize() middleware not in use"));t=t||{};var n=this,r=e._passport.session.user;if(r||r===0){var i=t.pauseStream?pause(e):null;e._passport.instance.deserializeUser(r,function(t,r){if(t)return n.error(t);if(!r){delete e._passport.session.user,n.pass(),i&&i.resume();return}var s=e._passport.instance._userProperty||"user";e[s]=r,n.pass(),i&&i.resume()})}else n.pass()},module.exports=SessionStrategy;